<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>PochonStore</title>

  <!-- SDK Telegram -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- ===========================
       CSS GLOBAL ‚Äì STYLE APP
       =========================== -->
  <style>
    /* ===========================
       1) VARIABLES + RESET
       =========================== */
    :root {
      --bg: #0e0e0e;
      --card: #1a1a1a;
      --text: #fff;
      --muted: #bdbdbd;
      --accent: #d4af37;
      --border: #2a2a2a;
      --radius: 14px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      touch-action: manipulation;
      overscroll-behavior-y: none;
      overflow-x: hidden;
      color: #fff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                   Roboto, sans-serif;
      position: relative;
    }

    body {
      background: #050505;
      position: relative;
      overflow-x: hidden;
    }

    /* Fond global avec logo */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -2;
      background: url("img/bgpss.png") center/cover no-repeat;
      opacity: 1;
    }

    /* Film sombre + halo dor√© */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background:
        radial-gradient(circle at 70% 80%, rgba(255,215,100,0.08), transparent 60%),
        rgba(0,0,0,0.45);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }

    .hidden {
      display: none;
    }

    /* ===========================
       2) SPLASH SCREEN
       =========================== */
    .splash {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      background:
        radial-gradient(circle at 30% 0%, rgba(255,215,100,0.25) 0%, transparent 45%),
        radial-gradient(circle at 70% 100%, rgba(255,215,100,0.20) 0%, transparent 55%),
        #050505;
      overflow: hidden;
      opacity: 1;
      transform: scale(1);
      transition: opacity .5s ease-out, transform .5s ease-out;
    }

    .splash--hide {
      opacity: 0;
      transform: scale(1.03);
      pointer-events: none;
    }

    .splash-inner {
      text-align: center;
      animation: splash-pop 0.7s ease-out forwards;
    }

    .splash-title,
    .splash-sub {
      opacity: 0;
      transform: translateY(6px);
      transition: opacity .45s ease-out, transform .45s ease-out;
    }

    .splash-title {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: .08em;
      text-transform: uppercase;
      margin-bottom: 4px;
      background: linear-gradient(120deg, #ffd766, #f3c13a, #ffffff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .splash-sub {
      font-size: .9rem;
      color: #d0d0d0;
    }

    .splash--show-text .splash-title,
    .splash--show-text .splash-sub {
      opacity: 1;
      transform: translateY(0);
    }

    .splash-dots {
      margin-top: 18px;
      display:flex;
      justify-content:center;
      gap:8px;
      opacity:0;
      transform: translateY(4px);
      transition: opacity .4s ease, transform .4s ease;
    }

    .splash-dots span {
      width:8px;
      height:8px;
      border-radius:50%;
      background:#ffd766;
      box-shadow:0 0 12px rgba(255,215,100,0.7);
      animation:splash-dot 2.2s ease-in-out infinite;
    }

    .splash-dots span:nth-child(2){ animation-delay:.15s; }
    .splash-dots span:nth-child(3){ animation-delay:.30s; }

    .splash--show-dots .splash-dots{
      opacity: 1;
      transform: translateY(0);
    }
    
      /* LOGO SPLASH ‚Äì GROS + ROTATION 3D LENTE */
.splash-logo {
  width: 600px;              /* ‚úÖ plus gros */
  margin: 0 auto 24px;

  opacity: 0;
  transform: translateY(18px) scale(0.92);
  animation: splashLogoIntro 1s ease-out forwards;
}

.splash-logo img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: contain;

  transform-origin: center center;
  animation: logoSpin3D 4s linear infinite;  /* ‚úÖ rotation 3D lente */
}

/* Animation d‚Äôarriv√©e (fade + petit pop) */
@keyframes splashLogoIntro {
  0% {
    opacity: 0;
    transform: translateY(24px) scale(0.9);
  }
  60% {
    opacity: 1;
    transform: translateY(-3px) scale(1.03);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Rotation 3D sur lui-m√™me (effet pi√®ce) */
@keyframes logoSpin3D {
  0% {
    transform: rotateY(0deg);
  }
  50% {
    transform: rotateY(180deg);
  }
  100% {
    transform: rotateY(360deg);
  }
}

    @keyframes splash-pop {
      0%{
        opacity: 0;
        transform: translateY(10px) scale(0.9);
      }
      60%{
        opacity: 1;
        transform: translateY(0) scale(1.02);
      }
      100%{
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes splash-dot {
  0%,
  100% {
    transform: translateY(0);
    opacity: .3;
  }
  40% {
    transform: translateY(-4px);
    opacity: 1;
  }
}

    @keyframes splashRing {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes splashHalo {
  0% {
    opacity: 0;
    transform: scale(0.95);
  }
  40% {
    opacity: 0.7;
    transform: scale(1.08);
  }
  100% {
    opacity: 0;
    transform: scale(1.18);
  }
}

@keyframes splashLogoFloat {
  0% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-4px) scale(1.02);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

    /* entr√©e de la banni√®re */
@keyframes splashBannerIn{
  0%{
    opacity:0;
    transform: translateY(18px) scale(0.9);
  }
  70%{
    opacity:1;
    transform: translateY(-2px) scale(1.02);
  }
  100%{
    opacity:1;
    transform: translateY(0) scale(1);
  }
}

/* balayage lumineux */
@keyframes bannerShine{
  0%   { transform: translateX(-120%); }
  100% { transform: translateX(120%); }
}

    /* ===========================
       3) HEADER FLOU + MAIN
       =========================== */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      background: rgba(0, 0, 0, 0.04);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: none;
    }

    .header-logo {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-height: 80px;
      width: auto;
      object-fit: contain;
    }

    main {
  display: block;
  height: 100vh;
  padding-top: 160px;
  padding-bottom: 110px;
  box-sizing: border-box;
  overflow-y: auto;              /* c‚Äôest bien main qui scrolle */
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  overscroll-behavior-y: none;
}

    .tab-panel {
      display: none;
    }
    .tab-panel.active {
      display: block;
    }

    /* ===========================
       4) GRILLE PRODUITS (MENU)
       =========================== */
    .product-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      padding: 16px;
    }

    /* Carte produit (catalogue) */
    .product-thumb {
      position: relative;
      border-radius: 22px;
      overflow: hidden;
      padding: 0;
      display: flex;
      flex-direction: column;
      background: #111;
      box-shadow: 0 6px 18px rgba(0,0,0,0.6);
      border: 1px solid rgba(255,215,100,0.25);
      transition: transform .18s ease-out, box-shadow .18s ease-out;
      opacity: 0;
      transform: scale(0.94) translateY(20px);
      animation: productEnter 1.1s ease forwards;
    }

    @keyframes productEnter {
      0% {
        opacity: 0;
        transform: scale(0.9) translateY(26px);
        filter: brightness(0.7);
      }
      40% {
        opacity: 1;
        transform: scale(1.03) translateY(0);
        filter: brightness(1.08);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
        filter: brightness(1);
      }
    }

    .product-thumb:hover {
      transform: scale(1.03);
      box-shadow: 0 0 12px rgba(255,215,100,0.3);
    }

    /* Apparition en cascade */
    .product-grid .product-thumb:nth-child(1) { animation-delay: 0.15s; }
    .product-grid .product-thumb:nth-child(2) { animation-delay: 0.35s; }
    .product-grid .product-thumb:nth-child(3) { animation-delay: 0.55s; }
    .product-grid .product-thumb:nth-child(4) { animation-delay: 0.75s; }
    .product-grid .product-thumb:nth-child(5) { animation-delay: 0.95s; }
    .product-grid .product-thumb:nth-child(6) { animation-delay: 1.15s; }
    .product-grid .product-thumb:nth-child(7) { animation-delay: 1.35s; }

    .product-thumb img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      display: block;
    }

    .product-thumb-body {
      padding: 10px;
      text-align: left;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
    }

    .product-thumb-title {
      font-weight: 700;
      font-size: 1rem;
      margin: 0 0 4px;
      background: linear-gradient(90deg, #FFD54A, #FFB300, #FFF176);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .product-thumb-sub {
      font-size: 0.8rem;
      color: #d0d0d0;
      margin: 0;
    }

    /* Contour dor√© anim√© */
    .product-thumb::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      border: 2px solid rgba(255,215,100,0.9);
      box-shadow:
        0 0 8px rgba(255,215,100,0.6),
        0 0 18px rgba(0,0,0,0.8);
      pointer-events: none;
      z-index: 1;
      animation: cardBorderGlow 3s ease-in-out infinite;
    }

    @keyframes cardBorderGlow{
      0%{
        opacity: 0.7;
        box-shadow:
          0 0 6px rgba(255,215,100,0.4),
          0 0 14px rgba(0,0,0,0.8);
      }
      50%{
        opacity: 1;
        box-shadow:
          0 0 14px rgba(255,215,100,1),
          0 0 22px rgba(0,0,0,0.9);
      }
      100%{
        opacity: 0.7;
        box-shadow:
          0 0 6px rgba(255,215,100,0.4),
          0 0 14px rgba(0,0,0,0.8);
      }
    }

    /* Halo dor√© dans le coin */
    .product-thumb::after {
      content: "";
      position: absolute;
      top: -6px;
      right: -6px;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 2;
      background: radial-gradient(
        circle,
        rgba(255,215,100,0.95) 0%,
        rgba(255,215,100,0.0) 65%
      );
      opacity: 0;
      animation: cardCornerGlow 2.4s ease-in-out infinite;
    }

    @keyframes cardCornerGlow {
      0%{
        opacity: 0;
        transform: translate(10px,10px) scale(0.4);
      }
      40%{
        opacity: 1;
        transform: translate(0,0) scale(1);
      }
      100%{
        opacity: 0;
        transform: translate(-4px,-4px) scale(0.7);
      }
    }

    .product-thumb:active {
      transform: translateY(2px) scale(0.97);
      box-shadow: 0 3px 10px rgba(0,0,0,0.7);
    }

    /* Badges produit */
    .product-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: linear-gradient(180deg, rgba(40,40,40,0.8), rgba(15,15,15,0.8));
      border: 1px solid rgba(255,215,100,0.8);
      color: #FFD766;
      font-weight: 700;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      padding: 4px 10px 5px;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.4);
      z-index: 3;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      transition: transform 0.2s ease-out, opacity 0.2s ease-out;
    }

    .product-badge:nth-of-type(2) { top: 36px; }
    .product-badge:nth-of-type(3) { top: 62px; }

    .product-badge.gold {
      background: rgba(255,215,100,0.15);
      border: 1px solid rgba(255,215,100,0.9);
      color: #FFF8C4;
    }

    .product-badge.new {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.4);
      color: #ffffff;
      text-shadow: 0 0 8px rgba(255,255,255,0.5);
    }

    .product-badge:hover {
      transform: scale(1.05);
      opacity: 1;
    }

    /* ===========================
       5) FICHES PRODUITS (DETAIL)
       =========================== */
    .product-detail {
      padding: 16px;
    }

    .btn-back {
      border: 1px solid var(--border);
      background: #111;
      color: #fff;
      padding: 8px 14px;
      border-radius: 10px;
      margin-bottom: 12px;
    }

    .detail-media img {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
      display: block;
    }

    .product-card {
      background: rgba(20, 20, 20, 0.85);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border: 1px solid rgba(255, 215, 100, 0.2);
      box-shadow: 0 0 10px rgba(255, 215, 100, 0.1);
      border-radius: 10px;
      padding: 16px;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeUp 0.6s ease forwards;
    }

    .product-title {
      margin-top: 0;
      margin-bottom: 8px;
      color: #ffd766;
    }

    .product-desc {
      margin-top: 0;
      margin-bottom: 10px;
      color: var(--muted);
    }

    .product-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .pill {
      padding: 4px 8px;
      border: 1px solid var(--border);
      border-radius: 16px;
      color: var(--muted);
      font-size: 0.85rem;
    }

    .product-options label {
      display: block;
      margin: 8px 0;
      color: var(--muted);
      font-size: 0.9rem;
    }

    .product-options select {
      margin-left: 4px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #111;
      color: var(--text);
      padding: 4px 6px;
    }

    .qty-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .qty-row button {
      background: #222;
      color: #fff;
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 5px;
    }

    .qty-row input {
      background: #111;
      color: #fff;
      border: 1px solid var(--border);
      width: 60px;
      text-align: center;
      border-radius: 6px;
      padding: 4px;
    }

    .btn {
      background: #222;
      color: #fff;
      border: 1px solid var(--border);
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn.primary {
      background: var(--accent);
      color: #000;
      font-weight: 600;
      border-radius: 8px;
      padding: 8px 12px;
      border: none;
    }

    .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
    }

    @keyframes fadeUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ===========================
       6) CARTES INFO (INFOS / SUIVI / CONTACT)
       =========================== */
    .info-card {
      margin: 16px;
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      border: 1px solid var(--border);
      opacity: 0;
      transform: translateY(10px);
      animation: fadeUp 0.6s ease forwards;
    }

    .info-card h2 {
      margin-top: 0;
      margin-bottom: 8px;
      color: #ffd766;
    }

    .info-card p {
      margin-top: 0;
      color: var(--muted);
    }

    /* Texte en blanc dans la page Infos */
    #tab-infos strong {
      color: #fff;
      font-weight: 700;
      text-shadow: 0 0 4px rgba(255, 215, 0, 0.3);
    }

    /* ===========================
       7) BOTTOM NAV
       =========================== */
    .bottom-nav {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: 78px;
      display: flex;
      align-items: center;
      justify-content: space-around;
      background: rgba(5,5,6,0.97);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-top: 1px solid rgba(255,255,255,0.06);
      z-index: 300;
      overflow: visible;
    }

    .bottom-nav::before {
      content:"";
      position:absolute;
      left: 10%;
      right: 10%;
      top: -3px;
      height: 3px;
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255,215,100,0.95),
        transparent
      );
      opacity: 0.85;
      filter: blur(0.5px);
      animation: navSweep 3s linear infinite;
    }

    @keyframes navSweep{
      0%   { transform: translateX(-40%); }
      50%  { transform: translateX(40%); }
      100% { transform: translateX(-40%); }
    }

    .nav-btn {
      flex: 1;
      border: none;
      background: transparent;
      color: #bdbdbd;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      font-size: 0.78rem;
      position: relative;
      transition: transform .25s ease-out, color .25s ease-out;
    }

    .nav-btn span.icon {
      font-size: 1.2rem;
      margin-bottom: 2px;
      position: relative;
      transition: transform .25s ease-out, filter .25s ease-out;
    }

    .nav-btn.active {
      color: #d4af37;
      font-weight: 600;
      animation: bounceGold 0.7s ease-out;
    }

    .nav-btn.active span.icon {
      transform: translateY(-3px);
      filter: drop-shadow(0 0 6px rgba(255,215,100,0.6));
    }

    .nav-btn.active::after {
      content: "";
      position: absolute;
      bottom: 10px;
      left: 50%;
      width: 20px;
      height: 3px;
      border-radius: 999px;
      background: linear-gradient(90deg, transparent, #ffd766, transparent);
      transform: translateX(-50%) scaleX(0);
      opacity: 0;
      animation: glowPulse 0.8s ease-out forwards;
    }

    @keyframes bounceGold {
      0%   { transform: translateY(0); }
      35%  { transform: translateY(-6px); }
      65%  { transform: translateY(2px); }
      100% { transform: translateY(0); }
    }

    @keyframes glowPulse {
      0%   { opacity: 0; transform: translateX(-50%) scaleX(0.2); }
      40%  { opacity: 1; transform: translateX(-50%) scaleX(1.1); }
      100% { opacity: 0; transform: translateX(-50%) scaleX(1.3); }
    }

    /* ===========================
       8) BOUTON PANIER + BADGE + FLY ANIM
       =========================== */
    .cart-fab {
      position: fixed;
      right: 18px;
      bottom: 120px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 1px solid rgba(255,215,102,0.9);
      background: radial-gradient(circle at 30% 20%, rgba(255,215,102,0.15), transparent 60%),
                  linear-gradient(180deg,#151515,#050505);
      box-shadow: 0 10px 26px rgba(0,0,0,0.55);
      color: #fefefe;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 310;
    }
    
    .cart-fab.bump-cart{
  transform: translateY(-4px) scale(1.05);
}

    .cart-fab:active {
      transform: translateY(1px);
    }

    .cart-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      min-width: 18px;
      height: 18px;
      padding: 0 4px;
      border-radius: 999px;
      background: #000;
      border: 1px solid rgba(255,215,100,0.95);
      color: #ffd766;
      font-size: 0.7rem;
      font-weight: 600;
      display: none;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 8px rgba(0,0,0,0.7);
    }

    .cart-flyer {
      position: fixed;
      left: 0;
      top: 0;
      width: 26px;
      height: 26px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 400;
      background: radial-gradient(circle at 30% 30%, #fff8d0, #ffd766, #d4af37);
      box-shadow:
        0 0 10px rgba(255,215,100,0.9),
        0 0 18px rgba(0,0,0,0.9);
      transform: translate(0,0) scale(1);
      opacity: 1;
      transition:
        transform 0.55s cubic-bezier(0.18,0.89,0.32,1.28),
        opacity   0.55s ease-out;
    }

    /* ===========================
       9) PANIER FULLSCREEN
       =========================== */
    .cart-page {
      position: fixed;
      inset: 0;
      z-index: 350;
      display: none;
      align-items: center;
      justify-content: center;
      background:
        radial-gradient(circle at 0 0, rgba(255,215,100,0.12), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(255,215,100,0.10), transparent 55%),
        rgba(0,0,0,0.88);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .cart-page.show {
      display: flex;
      animation: cartFadeIn .35s ease-out;
    }

    .cart-page-inner {
      width: 100%;
      max-width: 520px;
      max-height: 88vh;
      display: flex;
      flex-direction: column;
      background: rgba(6,6,8,0.97);
      border-radius: 22px;
      border: 1px solid rgba(255,215,100,0.22);
      box-shadow: 0 18px 40px rgba(0,0,0,0.9);
      overflow: hidden;
      animation: cartSlideUp .35s ease-out;
    }

    .cart-page-header {
      padding: 14px 16px 10px;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .cart-page-title-block h2 {
      margin: 0;
      font-size: 1.3rem;
      background: linear-gradient(90deg,#FFD54A,#FFF6C3,#FFD54A);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .cart-page-title-block p {
      margin: 4px 0 0;
      font-size: .85rem;
      color: rgba(230,230,230,.85);
    }

    .cart-page-summary {
      padding: 10px 16px 8px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
      background: radial-gradient(circle at 0 0, rgba(255,215,100,0.16), transparent 60%);
    }
    
    .cart-payments{
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.pay-btn{
  flex: 1;
  min-width: calc(50% - 6px);
  font-size: 0.78rem;
  padding: 6px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.15);
  background: #111;
  color: #e0e0e0;
  cursor: pointer;
  transition: all .18s ease-out;
}

.pay-btn:hover{
  transform: translateY(-1px);
}

.pay-btn.active{
  border-color: rgba(255,215,100,0.85);
  background: #222;
  color: #ffd766;
  box-shadow: 0 0 10px rgba(255,215,100,0.5);
}

.cart-payment-note{
  margin-top: 6px;
  font-size: 0.8rem;
  color: #bdbdbd;
}

    .cart-summary-line {
      display: flex;
      justify-content: space-between;
      font-size: .9rem;
      margin-bottom: 4px;
    }

    .cart-summary-line span {
      color: #bdbdbd;
    }

    .cart-summary-line strong {
      font-weight: 600;
    }

    .cart-items {
  padding: 8px 12px 10px;
  overflow-y: auto;
  flex: 1;
  min-height: 0;                 /* ‚¨ÖÔ∏è important pour le scroll */
  -webkit-overflow-scrolling: touch;
}

    .cart-item {
      padding: 10px 10px 8px;
      margin-bottom: 8px;
      border-radius: 14px;
      background: rgba(18,18,20,0.96);
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 6px 14px rgba(0,0,0,0.6);
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      animation: cartItemIn .25s ease-out;
    }

    .cart-item-index {
      font-size: .78rem;
      color: #FFD54A;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .item-title {
      font-size: .95rem;
      font-weight: 600;
    }

    .item-sub {
      font-size: .8rem;
      color: #bdbdbd;
      margin-top: 3px;
    }

    .item-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
    }

    .item-price {
      font-size: .85rem;
      color: #f5f5f5;
    }

    .btn-remove {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,80,80,0.85);
      background: rgba(60,12,12,0.92);
      color: #ffdede;
      font-size: .78rem;
    }

    .cart-page-footer {
      padding: 10px 12px 12px;
      border-top: 1px solid rgba(255,255,255,0.06);
      display: flex;
      gap: 10px;
    }

    .cart-page-footer .btn {
      flex: 1;
    }

    @keyframes cartFadeIn{
      from{ opacity: 0; }
      to  { opacity: 1; }
    }
    @keyframes cartSlideUp{
      from{ transform: translateY(12px); opacity: 0.95; }
      to  { transform: translateY(0);    opacity: 1; }
    }
    @keyframes cartItemIn{
      from{ transform: translateY(6px); opacity: 0; }
      to  { transform: translateY(0);   opacity: 1; }
    }

    /* ===========================
       10) TOAST
       =========================== */
    #toast {
      position: fixed;
      left: 50%;
      bottom: 86px;
      transform: translateX(-50%);
      padding: 10px 14px;
      background: #121216;
      color: #fff;
      border: 1px solid #333;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      z-index: 350;
      opacity: 0;
      transition: opacity .2s;
      pointer-events: none;
    }

    /* ===========================
       11) HERO CONTACT / SUIVI
       =========================== */
    .contact-hero {
      margin: 4px 12px 4px;
      padding: 0;
      border-radius: 22px;
      background:
        radial-gradient(circle at 0% 0%, rgba(255,215,100,0.18), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(255,215,100,0.15), transparent 60%),
        rgba(0,0,0,0.78);
      box-shadow:
        0 12px 28px rgba(0,0,0,0.85),
        0 0 14px rgba(255,215,100,0.25);
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .contact-hero::before{
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle, rgba(255,215,100,0.22), transparent 65%);
      opacity: 0;
      animation: heroGlow 5s ease-in-out infinite;
      z-index: 0;
    }

    .contact-hero-title{
      display: inline-block;
      font-size: 2.3rem;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 2px;
      line-height: 1.1;
      text-align: center;
      background: linear-gradient(270deg,
        #FFFBEA,
        #FFD766,
        #FFB300,
        #FFFBEA);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow:
        0 0 10px rgba(255,215,100,0.7),
        0 0 20px rgba(0,0,0,0.8);
      animation: heroTextGlow 3s ease-in-out infinite alternate;
      position: relative;
      z-index: 1;
    }

    .contact-hero-star {
      font-size: 2.6rem;
      color: #FFE066;
      margin: 2px 0 0;
      text-shadow:
        0 0 14px rgba(255,215,100,0.9),
        0 0 28px rgba(255,215,100,0.5);
      animation: starFloat 2.6s ease-in-out infinite;
    }

    .contact-hero-parcel {
      font-size: 2.6rem;
      margin: 0 0 2px;
      text-shadow:
        0 0 10px rgba(255,215,100,0.8),
        0 0 22px rgba(0,0,0,0.9);
      animation: parcelBounce 1.8s ease-in-out infinite;
    }

    .contact-hero-subtitle{
      margin: 4px 0 0;
      font-size: 0.95rem;
      color: rgba(255,255,240,0.96);
      text-shadow: 0 0 6px rgba(0,0,0,0.85);
      position: relative;
      z-index: 1;
    }

    .contact-hero-tagline{
      margin: 18px 12px 14px;
      text-align: center;
      font-size: 0.95rem;
      color: rgba(255,255,220,0.95);
      text-shadow:
        0 0 8px rgba(255,215,100,0.7),
        0 0 20px rgba(0,0,0,0.85);
      animation: taglinePulse 2.8s ease-in-out infinite;
    }

    @keyframes heroGlow{
      0%,100% { opacity: 0.25; transform: scale(1); }
      50%     { opacity: 0.55; transform: scale(1.06); }
    }

    @keyframes starFloat{
      0%,100%{
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      50%{
        transform: translateY(-6px) scale(1.15);
        opacity: 1;
      }
    }

    @keyframes taglinePulse{
      0%,100% { opacity: 0.65; }
      50%     { opacity: 1; }
    }

    @keyframes heroTextGlow {
      0% {
        text-shadow:
          0 0 10px rgba(255,215,100,0.7),
          0 0 20px rgba(255,215,100,0.4);
      }
      100% {
        text-shadow:
          0 0 20px rgba(255,215,100,1),
          0 0 35px rgba(255,215,100,0.6);
      }
    }

    @keyframes parcelBounce{
      0%,100%{
        transform: translateY(0) scale(1);
      }
      30%{
        transform: translateY(-6px) scale(1.05);
      }
      60%{
        transform: translateY(2px) scale(0.98);
      }
    }

    /* Hero sp√©cifique onglet contact */
    #tab-contact .contact-hero {
      margin: 4px 12px 4px;
      padding: 10px 16px 10px;
      border-radius: 20px;
    }

    #tab-contact .contact-hero-title {
      font-size: 2.2rem;
      line-height: 1.05;
    }

    #tab-contact .contact-hero-star {
      font-size: 2.4rem;
      margin: 2px 0 0;
    }

    #tab-contact .contact-hero-subtitle {
      margin-top: 4px;
    }

    #tab-contact .info-card {
      margin-top: 10px;
    }

    /* ===========================
       12) SUIVI COLIS ‚Äì CHAMP
       =========================== */
    .tracking-input{
      margin: 12px 0 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .tracking-input label{
      font-size: 0.85rem;
      color: var(--muted);
    }

    .tracking-input input{
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #111;
      color: #fff;
      padding: 8px 10px;
      font-size: 0.95rem;
      outline: none;
    }

    .tracking-input input:focus{
      border-color: rgba(255,215,100,0.8);
      box-shadow: 0 0 10px rgba(255,215,100,0.4);
    }

    .tracking-helper{
      margin-top: 8px;
      font-size: 0.8rem;
      color: var(--muted);
    }

    /* ===========================
       13) CONTACT ‚Äì ANIM SEQUENCE
       =========================== */
    #tab-contact .contact-seq{
      opacity: 0;
      transform: translateY(12px) scale(0.96);
      animation: contactPop 0.6s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
      animation-delay: var(--delay, 0s);
    }

    #tab-contact .info-card{
      transition: transform .22s ease-out, box-shadow .22s ease-out;
    }

    #tab-contact .info-card:hover{
      transform: translateY(-4px);
      box-shadow: 0 10px 26px rgba(0,0,0,0.45);
    }

    @keyframes contactPop{
      0%{
        opacity: 0;
        transform: translateY(18px) scale(0.94);
      }
      70%{
        opacity: 1;
        transform: translateY(-3px) scale(1.02);
      }
      100%{
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    /* ===== PAGE PACKS COMPLETS ===== */

.packs-grid{
  margin-top: 18px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* carte hero en haut */
.pack-hero-card{
  margin-bottom: 10px;
  position: relative;
  overflow: hidden;
  border-radius: 18px;
  background:
    radial-gradient(circle at 0 0, rgba(255,215,100,0.18), transparent 55%),
    rgba(12,12,14,0.96);
  border: 1px solid rgba(255,215,100,0.25);
  box-shadow: 0 12px 28px rgba(0,0,0,0.85);
}

/* cartes pack */
.pack-card{
  position: relative;
  background:
    radial-gradient(circle at 0 0, rgba(255,215,100,0.10), transparent 55%),
    rgba(10,10,12,0.96);
  border-radius: 18px;
  border: 1px solid rgba(255,215,100,0.22);
  padding: 12px 14px 12px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.85);
  overflow: hidden;
  opacity: 0;
  transform: translateY(24px) scale(0.94);
  animation: packEnter 0.7s cubic-bezier(0.18,0.89,0.32,1.28) forwards;
}

/* glow l√©ger au survol / tap */
.pack-card::before{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius:20px;
  border:1px solid rgba(255,215,100,0);
  background:radial-gradient(circle at 0 0,
             rgba(255,215,100,0.20),
             transparent 60%);
  opacity:0;
  pointer-events:none;
  transition:opacity .25s ease-out;
}

.pack-card:active::before,
.pack-card:hover::before{
  opacity:1;
}

/* apparition en cascade */
.packs-grid .pack-card:nth-child(1){ animation-delay: 0.10s; }
.packs-grid .pack-card:nth-child(2){ animation-delay: 0.22s; }
.packs-grid .pack-card:nth-child(3){ animation-delay: 0.34s; }
.packs-grid .pack-card:nth-child(4){ animation-delay: 0.46s; }

@keyframes packEnter{
  0%{
    opacity: 0;
    transform: translateY(26px) scale(0.9);
    filter: brightness(0.8);
  }
  60%{
    opacity: 1;
    transform: translateY(-3px) scale(1.02);
    filter: brightness(1.05);
  }
  100%{
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: brightness(1);
  }
}

/* √©vite que la carte plonge trop */
.pack-card:active{
  transform: translateY(2px) scale(0.97);
}

/* header pack (titre + badge) */
.pack-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:6px;
  margin-bottom:4px;
}

.pack-name{
  font-weight: 800;
  font-size: 1rem;
}

/* badges */
.pack-badge{
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: .08em;
  padding: 3px 9px 4px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.35);
  color: #fff;
  background: rgba(0,0,0,0.4);
  white-space: nowrap;
}

.pack-badge-hot{
  border-color: rgba(255,120,80,0.9);
  background: rgba(60,12,12,0.9);
  color: #ffdede;
  box-shadow: 0 0 10px rgba(255,80,80,0.6);
  animation: badgePulse 1.8s ease-in-out infinite;
}

.pack-badge-elite{
  border-color: rgba(255,215,100,0.95);
  background: linear-gradient(120deg, #3b2b00, #6b4c00);
  color: #fff8cf;
}

.pack-price-row{
  display:flex;
  align-items: baseline;
  gap: 8px;
  margin-bottom: 4px;
}

.pack-old-price{
  font-size: 0.8rem;
  color: #bbbbbb;
  text-decoration: line-through;
  opacity: 0.8;
}

.pack-price{
  margin: 0;
  font-weight: 800;
  font-size: 1rem;
  color: #ffd766;
}

/* petite phrase "tu √©conomises" */
.pack-save{
  font-size: 0.78rem;
  color: #9cffc5;
  margin-bottom: 4px;
  animation: savePulse 2.2s ease-in-out infinite;
}

/* anim l√©g√®re sur l‚Äô√©conomie */
@keyframes savePulse{
  0%,100%{
    transform: translateY(0);
    opacity: 0.7;
    text-shadow: 0 0 4px rgba(0,0,0,0.7);
  }
  50%{
    transform: translateY(-1px);
    opacity: 1;
    text-shadow: 0 0 10px rgba(0,255,140,0.8);
  }
}

/* prix */
.pack-price{
  margin: 0 0 6px;
  font-weight: 800;
  font-size: 0.98rem;
  color: #ffd766;
}

/* petite ligne virtuelle entre prix et liste */
.pack-price::after{
  content:"";
  display:block;
  margin-top:5px;
  height:1px;
  border-radius:999px;
  background:linear-gradient(90deg,
    rgba(255,255,255,0.06),
    rgba(255,215,100,0.6),
    rgba(255,255,255,0.06));
}

/* liste contenu */
.pack-list{
  margin: 8px 0 10px;
  padding-left: 0;
  list-style: none;
  font-size: 0.86rem;
  color: #e0e0e0;
}

.pack-list li{
  position: relative;
  padding-left: 16px;
  margin-bottom: 3px;
  line-height: 1.25;
}

.pack-list li::before{
  content:"‚Ä¢";
  position:absolute;
  left:0;
  top:0;
  color:#ffd766;
  font-size:0.9rem;
}

/* bouton packs */
.pack-btn{
  width: 100%;
  justify-content: center;
  display: inline-flex;
  font-weight: 600;
  position: relative;
  overflow: hidden;
}

/* effet balayage lumineux au clic */
.pack-btn::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,
    transparent,
    rgba(255,255,255,0.35),
    transparent);
  transform:translateX(-120%);
  opacity:0;
  pointer-events:none;
}

.pack-btn:active{
  transform: scale(0.97);
}

.pack-btn:active::after{
  transition: transform .35s ease-out, opacity .35s ease-out;
  transform:translateX(120%);
  opacity:1;
}

/* variations par pack (l√©g√®re couleur) */
.pack-starter{
  border-color: rgba(255,255,255,0.16);
}

.pack-boost{
  border-color: rgba(255,170,80,0.7);
}

.pack-pro{
  border-color: rgba(120,200,255,0.7);
}

.pack-boss{
  border-color: rgba(255,215,100,0.9);
  box-shadow:
    0 0 14px rgba(255,215,100,0.6),
    0 12px 30px rgba(0,0,0,0.95);
}

/* anim badge BEST-SELLER */
@keyframes badgePulse{
  0%,100%{
    transform: translateY(0) scale(1);
    box-shadow: 0 0 6px rgba(255,80,80,0.4);
  }
  50%{
    transform: translateY(-1px) scale(1.05);
    box-shadow: 0 0 12px rgba(255,80,80,0.8);
  }
}

    /* ===========================
   HERO PACK ‚Äì STYLE SP√âCIAL
   =========================== */
.product-thumb.pack-hero{
  grid-column: span 2;                 /* pleine largeur */
  border-radius: 24px;
  overflow: hidden;
  position: relative;
  background: linear-gradient(180deg,#1a1a1a 0%,#0b0b0b 100%);
  border: 1px solid rgba(255,215,100,0.35);
  box-shadow:
    0 0 20px rgba(255,215,100,0.25),
    0 12px 24px rgba(0,0,0,0.8);
  animation: heroPackEnter 1.2s ease forwards;
}

/* Effet d'apparition noble */
@keyframes heroPackEnter{
  0%{
    opacity: 0;
    transform: scale(0.85) translateY(18px);
    filter: brightness(0.6);
  }
  60%{
    opacity: 1;
    transform: scale(1.03) translateY(-3px);
    filter: brightness(1.05);
  }
  100%{
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: brightness(1);
  }
}

/* Reflet dor√© qui glisse */
.product-thumb.pack-hero::before{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(120deg,
    transparent 20%,
    rgba(255,215,100,0.15) 50%,
    transparent 80%
  );
  background-size: 200% 200%;
  animation: heroPackShine 5s linear infinite;
  pointer-events:none;
}

@keyframes heroPackShine{
  0%   { background-position: -120% 0; }
  100% { background-position: 120% 0; }
}

/* Bordure dor√©e plus nette */
.product-thumb.pack-hero::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  border:1px solid rgba(255,215,80,0.7);
  box-shadow:
    0 0 12px rgba(255,215,100,0.4),
    0 0 22px rgba(0,0,0,0.8);
  pointer-events:none;
}

/* Titre plus grand & lisible */
.product-thumb.pack-hero .product-thumb-title{
  font-size:1.2rem;
  font-weight:800;
  letter-spacing:1px;
  background: linear-gradient(90deg,#ffe8a0,#ffcc4a,#ffe8a0);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:0 0 8px rgba(255,215,100,0.4);
}

/* Sous-texte plus visible */
.product-thumb.pack-hero .product-thumb-sub{
  font-size:0.9rem;
  color:#e7e7e7;
  text-shadow:0 0 6px rgba(0,0,0,0.8);
}

/* L'image garde tout le logo PACKS, plus de zoom */
.product-thumb.pack-hero img{
  width: 100%;
  height: auto;
  display: block;
  object-fit: contain;      /* AVANT c'√©tait cover */
  background: none;         /* bandes propres si besoin */
}

/* Plus de place pour le texte en dessous de l'image */
.product-thumb.pack-hero .product-thumb-body{
  padding: 8px 10px 16px;
}

/* ===========================
   PAGE PROFIL ‚Äì HERO + CARTES
   =========================== */

#tab-profil{
  padding: 12px 12px 18px;
}

/* Hero en haut (avatar + nom) */
.profile-hero{
  margin: 4px 0 14px;
  padding: 10px 14px;
  border-radius: 18px;
  display: flex;
  align-items: center;
  gap: 12px;
  background:
    radial-gradient(circle at 0 0, rgba(255,215,100,0.18), transparent 60%),
    rgba(5,5,5,0.9);
  border: 1px solid rgba(255,215,100,0.35);
  box-shadow:
    0 10px 26px rgba(0,0,0,0.85),
    0 0 14px rgba(255,215,100,0.25);
}

.profile-avatar{
  width: 54px;
  height: 54px;
  border-radius: 50%;
  border: 2px solid rgba(255,215,100,0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  background:
    radial-gradient(circle at 30% 0, rgba(255,215,100,0.35), transparent 65%),
    #111;
  box-shadow:
    0 0 10px rgba(255,215,100,0.8),
    0 0 22px rgba(0,0,0,0.9);
  font-weight: 800;
  font-size: 1.3rem;
}

.profile-avatar span{
  background: linear-gradient(120deg,#fffbe8,#ffd766,#ffb300);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.profile-hero-text{
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.profile-hero-name{
  font-weight: 800;
  font-size: 1.05rem;
}

.profile-hero-handle{
  font-size: 0.86rem;
  color: var(--muted);
}

/* Cartes principales */
.profile-card{
  margin: 0 0 14px;
  padding: 12px 14px 12px;
  border-radius: 18px;
  background: rgba(12,12,14,0.96);
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 10px 24px rgba(0,0,0,0.9);
}

.profile-card--user{
  border-color: rgba(120,190,255,0.85);
}

.profile-card--history{
  border-color: rgba(255,215,100,0.85);
}

.profile-card--app{
  border-color: rgba(180,120,255,0.85);
}

.profile-card-header{
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.profile-card-header h2{
  margin: 0;
  font-size: 1rem;
  color: #ffd766;
}

.profile-card-header p{
  margin: 2px 0 0;
  font-size: 0.8rem;
  color: var(--muted);
}

.profile-card-icon{
  width: 34px;
  height: 34px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  background: radial-gradient(circle at 0 0, rgba(255,215,100,0.22), transparent 60%),
              #181818;
}

/* Grille info (label / valeur) */
.profile-info-grid{
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 6px;
}

.profile-row{
  display: flex;
  justify-content: space-between;
  gap: 10px;
  font-size: 0.86rem;
}

.profile-label{
  color: var(--muted);
}

.profile-value{
  font-weight: 600;
}

.profile-pill-ok{
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.8rem;
  background: rgba(40,130,60,0.35);
  border: 1px solid rgba(90,220,120,0.8);
  color: #c8ffd8;
}

/* Historique */
.profile-history-list{
  margin-top: 6px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.history-entry{
  padding: 8px 10px;
  border-radius: 12px;
  background: rgba(18,18,22,0.98);
  border: 1px solid rgba(255,215,100,0.22);
  font-size: 0.82rem;
}

.history-entry-header{
  display: flex;
  justify-content: space-between;
  margin-bottom: 2px;
}

.history-entry-title{
  font-weight: 600;
}

.history-entry-total{
  color: #ffd766;
}

.history-entry-items{
  color: var(--muted);
}

.profile-hint{
  margin-top: 8px;
  font-size: 0.76rem;
  color: var(--muted);
}
  </style>
</head>

<body>
  <!-- ===========================
       SPLASH SCREEN
       =========================== -->
  <div id="splash" class="splash">
    <div class="splash-inner">
      <div class="splash-logo">
        <img src="img/banner.png" alt="PochonStore">
      </div>
      <div class="splash-title">PochonStore</div>
      <div class="splash-sub">Chargement de la boutique‚Ä¶</div>
      <div class="splash-dots" id="splashDots">
        <span></span><span></span><span></span>
      </div>
    </div>
  </div>

  <!-- ===========================
       HEADER
       =========================== -->
  <header class="header">
    <img src="img/banner.png" alt="PochonStore" class="header-logo" />
  </header>

  <!-- ===========================
       MAIN ‚Äì TABS
       =========================== -->
  <main id="main">
    <!-- ========= ONGLET MENU ========= -->
    <section id="tab-menu" class="tab-panel active">
      <div class="product-grid" id="productGrid">
        <!-- P8 HERO PACKS COMPLETS -->
<button class="product-thumb pack-hero" onclick="openProduct('packs')">
  <div class="product-badge gold">üì¶ Packs complets</div>
  <div class="product-badge">üî• Meilleure offre</div>
  <img src="img/pack-menu.jpg" alt="Packs complets" />
  <div class="product-thumb-body">
    <div class="product-thumb-title">Packs PochonStore</div>
    <div class="product-thumb-sub">
      Starter, Boost, Pro, Boss ‚Äì tout pour lancer ton shop.
    </div>
  </div>
</button>

        <!-- P1 : Pochons -->
        <button class="product-thumb" onclick="openProduct('p1')">
          <div class="product-badge">üî• Populaire</div>
          <div class="product-badge">üßæ Sur devis</div>
          <img src="img/pochons11.png" alt="Pochon personnalis√©" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Pochon personnalis√©</div>
            <div class="product-thumb-sub">Flatbags et doypacks imprim√©s avec ton visuel</div>
          </div>
        </button>

        <!-- P2 : Tableaux -->
        <button class="product-thumb" onclick="openProduct('p2')">
          <div class="product-badge gold">üíé Premium</div>
          <img src="img/tableau1.jpg" alt="Tableaux personnalis√©s" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Tableaux personnalis√©s</div>
            <div class="product-thumb-sub">Panoramiques, populaires, carr√©s</div>
          </div>
        </button>

        <!-- P3 : Cartes -->
        <button class="product-thumb" onclick="openProduct('p3')">
          <div class="product-badge">‚ö° Recommand√©</div>
          <img src="img/cartescata.png" alt="Cartes fid√©lit√© / visite" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Cartes fid√©lit√© / visite</div>
            <div class="product-thumb-sub">Recto verso, 8,5cm x 5,4cm</div>
          </div>
        </button>

        <!-- P4 : √âtiquettes -->
        <button class="product-thumb" onclick="openProduct('p4')">
          <img src="img/etiquettes1.jpg" alt="√âtiquettes personnalis√©es" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">√âtiquettes personnalis√©es</div>
            <div class="product-thumb-sub">Rondes, rectangles, tailles sur devis</div>
          </div>
        </button>

        <!-- P5 : Scelleuse -->
        <button class="product-thumb" onclick="openProduct('p5')">
          <img src="img/scelleuse.jpg" alt="Scelleuse" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Scelleuse</div>
            <div class="product-thumb-sub">Scelleuse thermique pour fermer tes pochons</div>
          </div>
        </button>

        <!-- P6 : Fus√©es -->
        <button class="product-thumb" onclick="openProduct('p6')">
          <div class="product-badge new">‚ú® Coup de c≈ìur</div>
          <img src="img/fus√©es1.jpg" alt="Fus√©es 1,5 ml" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Fus√©es 1,5 ml</div>
            <div class="product-thumb-sub">Capsules vides, tarifs selon quantit√©</div>
          </div>
        </button>

        <!-- P7 : Design personnalis√© -->
        <button class="product-thumb" onclick="openProduct('p7')">
          <div class="product-badge gold">ü™Ñ Sur mesure</div>
          <img src="img/design.jpg" alt="Design personnalis√©" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Design personnalis√©</div>
            <div class="product-thumb-sub">Basique, Premium ou Pack identit√©</div>
          </div>
        </button>
        
        <!-- P9 : Service ‚Äì D√©veloppement mini-app -->
<button class="product-thumb" onclick="openProduct('dev')">
  <div class="product-badge gold">üíª Mini-App</div>
  <div class="product-badge">‚öôÔ∏è Sur mesure</div>
  <img src="img/dev-miniapp.jpg" alt="D√©veloppement mini-app Telegram" />
  <div class="product-thumb-body">
    <div class="product-thumb-title">Mini-app Telegram / WebApp</div>
    <div class="product-thumb-sub">
      Je code ta mini-app sur mesure pour ton shop ou ton projet.
    </div>
  </div>
</button>
        </div>
        
      <!-- ===== FICHE PRODUIT P1 ===== -->
      <div id="productDetail_p1" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/pochons22.png" alt="Pochon personnalis√©" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Pochon personnalis√©</h3>
          <p class="product-desc">
            Pochons flatbag et doypacks imprim√©s avec votre design.
          </p>
          <div class="product-meta">
            <span class="pill">Min : 500 pi√®ces</span>
            <span class="pill">D√©lai : 12‚Äì13 jours ouvrables</span>
          </div>
          <div class="product-options">
            <label>
              Quantit√© (pack) :
              <select id="p1_quantite">
                <option>500</option>
                <option>1000</option>
                <option>1500</option>
                <option>2000</option>
                <option>+ de quantit√© (sur devis)</option>
              </select>
            </label>

            <label>
              Taille :
              <select id="p1_taille">
                <option>8√ó11 cm</option>
                <option>8√ó13 cm</option>
              </select>
            </label>

            <label>
              Finition :
              <select id="p1_finition">
                <option>Mat</option>
                <option>Brillant</option>
              </select>
            </label>

            <label>
              Impression :
              <select id="p1_impression">
                <option>1 design</option>
                <option>multi designs +40‚Ç¨</option>
              </select>
            </label>

            <label>
              Fen√™tre :
              <select id="p1_fenetre">
                <option>sans fen√™tre</option>
                <option>avec fen√™tre +40‚Ç¨</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p1_qty')">‚àí</button>
            <input id="p1_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p1_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP1(this)">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- ===== FICHE PRODUIT P2 ===== -->
      <div id="productDetail_p2" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/tableau1.jpg" alt="Tableaux personnalis√©s" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Tableaux personnalis√©s</h3>
          <p class="product-desc">
            Impression haute qualit√© sur toile, formats panoramiques, populaires et carr√©s.
          </p>
          <div class="product-options">
            <label>Format :
              <select id="p2_format">
                <!-- Panoramiques -->
                <option value="Panoramique|60√ó20|50">Panoramique 60√ó20 ‚Äî 50 ‚Ç¨</option>
                <option value="Panoramique|60√ó30|60">Panoramique 60√ó30 ‚Äî 60 ‚Ç¨</option>
                <option value="Panoramique|80√ó40|80">Panoramique 80√ó40 ‚Äî 80 ‚Ç¨</option>
                <option value="Panoramique|100√ó50|100">Panoramique 100√ó50 ‚Äî 100 ‚Ç¨</option>
                <option value="Panoramique|120√ó60|120">Panoramique 120√ó60 ‚Äî 120 ‚Ç¨</option>
                <!-- Populaires -->
                <option value="Populaire|60√ó40|70">Populaire 60√ó40 ‚Äî 70 ‚Ç¨</option>
                <option value="Populaire|80√ó60|90">Populaire 80√ó60 ‚Äî 90 ‚Ç¨</option>
                <option value="Populaire|90√ó60|100">Populaire 90√ó60 ‚Äî 100 ‚Ç¨</option>
                <!-- Carr√©s -->
                <option value="Carr√©|60√ó60|70">Carr√© 60√ó60 ‚Äî 70 ‚Ç¨</option>
                <option value="Carr√©|80√ó80|90">Carr√© 80√ó80 ‚Äî 90 ‚Ç¨</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p2_qty')">‚àí</button>
            <input id="p2_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p2_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP2(this)">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- ===== FICHE PRODUIT P3 ===== -->
      <div id="productDetail_p3" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/cartes.mp4" alt="Cartes fid√©lit√© / visite" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Cartes de fid√©lit√© / visite</h3>
          <p class="product-desc">
            Cartes professionnelles recto verso, papier 350g, impression couleur.
          </p>
          <div class="product-options">
            <label>Quantit√© :
              <select id="p3_quantite">
                <option value="250|70">250 cartes ‚Äî 70 ‚Ç¨</option>
                <option value="500|140">500 cartes ‚Äî 140 ‚Ç¨</option>
                <option value="1000|180">1000 cartes ‚Äî 180 ‚Ç¨</option>
                <option value="+1000|0">+ 1000 cartes ‚Äî sur devis</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p3_qty')">‚àí</button>
            <input id="p3_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p3_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP3(this)">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- ===== FICHE PRODUIT P4 ===== -->
      <div id="productDetail_p4" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/etiquettes1.jpg" alt="√âtiquettes personnalis√©es" />
        </div>
        <div class="product-card">
          <h3 class="product-title">√âtiquettes personnalis√©es</h3>
          <p class="product-desc">
            √âtiquettes adh√©sives pour packaging, pochons, produits‚Ä¶ Formats au choix.
          </p>
          <div class="product-options">
            <label>Format :
              <select id="p4_format">
                <option value="200 √©tiquettes 7√ó4 cm|70">200 √©tiquettes 7√ó4 cm ‚Äî 70 ‚Ç¨</option>
                <option value="400 √©tiquettes rondes 0‚Äì3 cm|60">400 √©tiquettes rondes 0‚Äì3 cm ‚Äî 60 ‚Ç¨</option>
                <option value="Taille personnalis√©e (sur devis)|0">Taille personnalis√©e ‚Äî sur devis</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p4_qty')">‚àí</button>
            <input id="p4_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p4_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP4(this)">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- ===== FICHE PRODUIT P5 ===== -->
      <div id="productDetail_p5" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/scelleuse.jpg" alt="Scelleuse" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Scelleuse</h3>
          <p class="product-desc">
            Appareil de soudure thermique id√©al pour fermer vos pochons.
          </p>
          <div class="product-meta">
            <span class="pill">Prix : 10 ‚Ç¨</span>
            <span class="pill">D√©lai : 2‚Äì3 jours</span>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p5_qty')">‚àí</button>
            <input id="p5_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p5_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP5(this)">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- ===== FICHE PRODUIT P6 ===== -->
      <div id="productDetail_p6" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/fus√©es1.jpg" alt="Fus√©es 1,5 ml" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Fus√©es 1,5 ml</h3>
          <p class="product-desc">
            Capsules vides pr√™tes √† remplir. Tarifs d√©gressifs selon la quantit√©.
          </p>
          <div class="product-options">
            <label>Quantit√© :
              <select id="p6_quantite">
                <option data-price="20">100 ‚Äî 20 ‚Ç¨</option>
                <option data-price="50">500 ‚Äî 50 ‚Ç¨</option>
                <option data-price="100">1000 ‚Äî 100 ‚Ç¨</option>
                <option data-price="0">+ sur devis</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p6_qty')">‚àí</button>
            <input id="p6_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p6_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP6(this)">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- ===== FICHE PRODUIT P7 : DESIGN ===== -->
      <div id="productDetail_p7" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/design.jpg" alt="Design personnalis√©" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Design personnalis√©</h3>
          <p class="product-desc">
            Tu n‚Äôas pas encore de visuel ? On s‚Äôoccupe du design pour tes pochons, cartes, √©tiquettes, etc.
            Choisis la formule qui correspond √† ton besoin.
          </p>
          <div class="product-meta">
            <span class="pill">Fichier livrable : PNG/JPG haute qualit√©</span>
            <span class="pill">R√©visions possibles selon la formule</span>
          </div>
          <div class="product-options">
            <label>Formule :
              <select id="p7_formule">
                <option value="Basique|40|2‚Äì3 jours">
                  Formule basique 40‚Ç¨ (2‚Äì3 jours)
                </option>
                <option value="Premium (dessin fait main)|180|4‚Äì5 jours">
                  Formule premium (dessin fait main) 180‚Ç¨ (4‚Äì5 jours)
                </option>
                <option value="Pack identit√© (1 logo + 1 flyer + 2 stickers)|80|3‚Äì4 jours">
                  Pack identit√© (1 logo + 1 flyer + 2 stickers) 80‚Ç¨ (3‚Äì4 jours)
                </option>
                <option value="Stickers Telegram/Potato|40|2‚Äì3 jours">
                  Stickers Telegram ou potato 40‚Ç¨ (2‚Äì3 jours)
                </option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p7_qty')">‚àí</button>
            <input id="p7_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p7_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP7(this)">Ajouter</button>
          </div>
        </div>
      </div>
      
            <!-- FICHE PRODUIT P8 : PACKS COMPLETS -->
<div id="productDetail_packs" class="product-detail hidden">
  <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>

  <div class="product-card pack-hero-card">
    <h3 class="product-title">Packs complets PochonStore</h3>
    <p class="product-desc">
      Choisis un pack cl√© en main selon ton niveau : d√©butant, joueur s√©rieux ou gros shop.
      Chaque pack inclut pochons, visuels et supports pour lancer ta marque.
    </p>
    <div class="product-meta">
      <span class="pill">Sur devis personnalis√©</span>
      <span class="pill">Prix indicatifs ajustables</span>
    </div>
  </div>

  <div class="packs-grid">
    <!-- PACK STARTER -->
    <div class="pack-card pack-starter">
      <div class="pack-header">
        <span class="pack-name">Pack Starter</span>
        <span class="pack-badge">Pour d√©buter</span>
      </div>
      <div class="pack-price-row">
  <span class="pack-old-price">520,00‚Ç¨</span>
  <span class="pack-price">480,00‚Ç¨</span>
</div>
<div class="pack-save">Tu √©conomises 40‚Ç¨</div>
      <ul class="pack-list">
        <li>500 pochons personnalis√©s</li>
        <li>1 design basique inclus</li>
        <li>1 lot d‚Äô√©tiquettes simples</li>
      </ul>
      <button class="btn primary pack-btn" type="button"
              onclick="addPack('starter', this)">
        Ajouter ce pack
      </button>
    </div>

    <!-- PACK BOOST -->
    <div class="pack-card pack-boost">
      <div class="pack-header">
        <span class="pack-name">Pack Boost</span>
        <span class="pack-badge pack-badge-hot">Best-seller</span>
      </div>
      <div class="pack-price-row">
  <span class="pack-old-price">830,00‚Ç¨</span>
  <span class="pack-price">700,00‚Ç¨</span>
</div>
<div class="pack-save">Tu √©conomises 130‚Ç¨</div>
      <ul class="pack-list">
        <li>1000 pochons personnalis√©s</li>
        <li>Multi-design + option fen√™tre</li>
        <li>250 cartes fid√©lit√© / visite</li>
        <li>Mini pack identit√© visuelle</li>
      </ul>
      <button class="btn primary pack-btn" type="button"
              onclick="addPack('boost', this)">
        Ajouter ce pack
      </button>
    </div>

    <!-- PACK PRO -->
    <div class="pack-card pack-pro">
      <div class="pack-header">
        <span class="pack-name">Pack Pro</span>
        <span class="pack-badge">Pour les gros joueurs</span>
      </div>
      <div class="pack-price-row">
  <span class="pack-old-price">1270,00‚Ç¨</span>
  <span class="pack-price">1140,00‚Ç¨</span>
</div>
<div class="pack-save">Tu √©conomises 130‚Ç¨</div>
      <ul class="pack-list">
        <li>1500‚Äì2000 pochons premium</li>
        <li>Multi design + fen√™tre inclus</li>
        <li>500 cartes fid√©lit√© / visite</li>
        <li>Pack identit√© + 400 √©tiquettes premium</li>
        <li>Scelleuse offerte</li>
      </ul>
      <button class="btn primary pack-btn" type="button"
              onclick="addPack('pro', this)">
        Ajouter ce pack
      </button>
    </div>

    <!-- PACK BOSS -->
    <div class="pack-card pack-boss">
      <div class="pack-header">
        <span class="pack-name">Pack Boss</span>
        <span class="pack-badge pack-badge-elite">Full branding</span>
      </div>
      <div class="pack-price-row">
  <span class="pack-old-price">1650-1700,00‚Ç¨</span>
  <span class="pack-price">1500-1600,00‚Ç¨</span>
</div>
<div class="pack-save">Tu √©conomises +100‚Ç¨</div>
      <ul class="pack-list">
        <li>2000+ pochons premium</li>
        <li>Multi + fen√™tre</li>
        <li>1000 cartes fid√©lit√© / visite</li>
        <li>Pack identit√© complet (logo + flyers + stickers)</li>
        <li>400 √âtiquettes, scelleuse & 1 tableau 60x40cm</li>
      </ul>
      <button class="btn primary pack-btn" type="button"
              onclick="addPack('boss', this)">
        Ajouter ce pack
      </button>
    </div>
  </div>
  </div>
  
      <!-- ===== FICHE PRODUIT P9 : MINI-APP / DEV ===== -->
<div id="productDetail_dev" class="product-detail hidden">
  <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>

  <div class="detail-media">
    <img src="img/dev-miniapp.jpg" alt="D√©veloppement mini-app Telegram / WebApp" />
  </div>

  <div class="product-card">
    <h3 class="product-title">D√©veloppement mini-app Telegram / WebApp</h3>
    <p class="product-desc">
      Tu veux la m√™me exp√©rience que PochonStore pour ton shop ou ton projet ?
      Je d√©veloppe pour toi une mini-app Telegram ou une WebApp sur mesure :
      catalogue, panier, devis, animations, int√©gration Telegram‚Ä¶ comme ici.
    </p>

    <div class="product-meta">
      <span class="pill">Prestation sur devis</span>
      <span class="pill">Code sur mesure</span>
      <span class="pill">Livraison 5‚Äì10 jours selon projet</span>
    </div>

    <ul class="pack-list">
      <li>Analyse de ton besoin (type de shop, produits, options).</li>
      <li>Cr√©ation de la mini-app (structure, design, animations).</li>
      <li>Int√©gration Telegram (WebApp + bouton ‚ÄúOuvrir la boutique‚Äù).</li>
      <li>Adaptation mobile first (optimis√©e pour smartphone).</li>
      <li>Accompagnement pour la mise en ligne et les tests.</li>
    </ul>

    <button class="btn primary pack-btn" type="button"
            onclick="openDevService()">
      Discuter de mon projet üí¨
    </button>
  </div>
</div>
    </section>

    <!-- ========= ONGLET INFOS ========= -->
    <section id="tab-infos" class="tab-panel">
      <div class="info-card">
        <h2>üßæ Informations ‚Äì PSS</h2>

        <p>üí∞ <strong>Paiement</strong><br>
        Le paiement complet est demand√© √† la commande afin de lancer la fabrication de vos produits sans d√©lai.</p>

        <p>‚è±Ô∏è <strong>D√©lais de production</strong><br>
        Les d√©lais peuvent varier selon le type de produit et la quantit√©.
        Une estimation est communiqu√©e lors de la validation du devis.</p>

        <p>üìÅ <strong>Formats de fichiers accept√©s</strong><br>
        (.png, .jpg, .pdf) Assure-toi que tes visuels soient en haute r√©solution
        pour un rendu optimal.</p>

        <p>üé® <strong>Produits personnalis√©s</strong><br>
        Les cr√©ations personnalis√©es ne sont ni √©changeables ni remboursables, sauf en cas d‚Äôerreur
        ou de d√©faut de fabrication constat√©.</p>

        <p>üì¶ <strong>Exp√©dition</strong><br>
        Les commandes sont soigneusement emball√©es et exp√©di√©es apr√®s validation du paiement complet.
        Le num√©ro de suivi est communiqu√© d√®s l‚Äôenvoi.</p>
      </div>
      
        <div class="info-card">
  <h2>üíª D√©veloppement de mini-apps</h2>
  <p>
    La boutique que tu utilises actuellement a √©t√© d√©velopp√©e sur mesure.
    Je peux cr√©er la m√™me chose pour ton shop, ta marque ou ton projet :
    catalogue, panier, devis automatis√©, int√©gration Telegram, etc.
  </p>
  <p>
    Int√©ress√©(e) par ta propre mini-app ? Clique ci-dessous pour m‚Äôexpliquer
    ton besoin, et on voit ensemble ce qui est possible.
  </p>
  <button class="btn primary" type="button" onclick="openDevService()">
    Parler de mon projet mini-app üí¨
  </button>
</div>
    </section>

    <!-- ========= ONGLET SUIVI COLIS ========= -->
    <section id="tab-canal" class="tab-panel">
      <!-- HERO SUIVI -->
      <div class="contact-hero">
        <h2 class="contact-hero-title">SUIVI COLIS</h2>
        <div class="contact-hero-parcel">üì¶</div>
        <p class="contact-hero-subtitle">
          Suis ton colis facilement gr√¢ce √† TrackBot sur Telegram.
        </p>
      </div>

      <div class="info-card">
        <h2>Suivi de ta commande</h2>
        <p>
          Une fois ton colis exp√©di√©, tu re√ßois un num√©ro de suivi.<br>
          Entre-le ci-dessous puis clique sur le bouton pour ouvrir TrackBot.
        </p>

        <div class="tracking-input">
          <label for="trackingNumber">Num√©ro de suivi</label>
          <input id="trackingNumber"
                 type="text"
                 placeholder="Ex : 6A1234567890" />
        </div>

        <button class="btn primary" type="button" onclick="openTrackBot()">
          Suivre mon colis üì¶
        </button>

        <p class="tracking-helper">
          Astuce : si tu laisses le champ vide, TrackBot s‚Äôouvre normalement et tu pourras saisir le num√©ro √† la main.
        </p>
      </div>
    </section>

    <!-- ========= ONGLET CONTACT ========= -->
    <section id="tab-contact" class="tab-panel">
      <div class="contact-hero"
           style="margin: 4px 12px 4px; padding: 10px 16px 10px; border-radius: 20px;">
        <h2 id="contactHeroTitle"
            class="contact-hero-title"
            style="font-size: 2.1rem; line-height: 1.05;">
          NOUS<br>CONTACTER
        </h2>

        <div class="contact-hero-star"
             style="font-size: 2.4rem; margin: -4px 0 -4px;">
          ‚ú¶
        </div>

        <p class="contact-hero-subtitle"
           style="margin: 4px 0 0; font-size: 0.95rem;">
          Un message, un devis, une id√©e ? On vous r√©pond vite ‚ú®
        </p>
      </div>

      <div class="info-card">
        <h2>Contact</h2>
        <p>Parle directement avec nous sur Telegram pour un devis,
          une question ou le suivi de commande.</p>
        <button class="btn primary" type="button" onclick="openContact()">
          √âcrire au compte
        </button>
      </div>

      <div class="info-card">
        <h2>Rejoindre le canal</h2>
        <p>Actus, promos, coulisses de Pochon Store.</p>
        <button class="btn primary" type="button" onclick="openChannel()">
          Ouvrir le canal
        </button>
      </div>

      <div class="info-card">
        <h2>Tous nos liens</h2>
        <p>Retrouve la boutique, les r√©seaux et tous les liens utiles sur une seule page.</p>
        <button class="btn primary" type="button" onclick="openLinksHub()">
          Voir tous nos liens
        </button>
      </div>

      <p class="contact-hero-tagline">
        Nous sommes l√† pour t‚Äôaider 7j/7 ‚ú®
      </p>
    </section>
  
          <section id="tab-profil" class="tab-panel">
  <!-- HERO PROFIL -->
  <div class="profile-hero">
    <div class="profile-avatar">
      <span id="profileAvatarLetter">P</span>
    </div>
    <div class="profile-hero-text">
      <div id="profileDisplayName" class="profile-hero-name">PochonStore</div>
      <div id="profileHandle" class="profile-hero-handle">@pssv2</div>
    </div>
  </div>

  <!-- CARTE 1 : INFORMATIONS UTILISATEUR -->
  <div class="profile-card profile-card--user">
    <div class="profile-card-header">
      <div class="profile-card-icon">üë§</div>
      <div>
        <h2>Informations utilisateur</h2>
        <p>Donn√©es Telegram utilis√©es dans la boutique.</p>
      </div>
    </div>

    <div class="profile-info-grid">
      <div class="profile-row">
        <span class="profile-label">ID Telegram</span>
        <span id="profileId" class="profile-value">‚Äî</span>
      </div>
      <div class="profile-row">
        <span class="profile-label">Pr√©nom</span>
        <span id="profileFirstName" class="profile-value">‚Äî</span>
      </div>
      <div class="profile-row">
        <span class="profile-label">Nom</span>
        <span id="profileLastName" class="profile-value">‚Äî</span>
      </div>
      <div class="profile-row">
        <span class="profile-label">Nom d'utilisateur</span>
        <span id="profileUsername" class="profile-value">‚Äî</span>
      </div>
      <div class="profile-row">
        <span class="profile-label">Langue</span>
        <span id="profileLang" class="profile-value">‚Äî</span>
      </div>
    </div>
  </div>

  <!-- CARTE 2 : HISTORIQUE DE DEVIS (STATUT PLUG) -->
  <div class="profile-card profile-card--history">
    <div class="profile-card-header">
      <div class="profile-card-icon">üßæ</div>
      <div>
        <h2>Historique de devis</h2>
        <p>R√©cap des demandes envoy√©es depuis cette mini-app.</p>
      </div>
    </div>

    <div id="historyList" class="profile-history-list">
      <!-- Rempli en JS via renderHistory() -->
    </div>

    <p class="profile-hint">
      L‚Äôhistorique est enregistr√© uniquement sur ton appareil (localStorage).
    </p>
  </div>

  <!-- CARTE 3 : INFOS APPLICATION -->
  <div class="profile-card profile-card--app">
    <div class="profile-card-header">
      <div class="profile-card-icon">‚öôÔ∏è</div>
      <div>
        <h2>Informations de l‚Äôapplication</h2>
        <p>Statut de la session et de la mini-app.</p>
      </div>
    </div>

    <div class="profile-info-grid">
      <div class="profile-row">
        <span class="profile-label">Plateforme</span>
        <span class="profile-value">Telegram Mini App</span>
      </div>
      <div class="profile-row">
        <span class="profile-label">Session</span>
        <span id="profileSession" class="profile-value profile-pill-ok">Connect√©</span>
      </div>
      <div class="profile-row">
        <span class="profile-label">Derni√®re connexion</span>
        <span id="profileLastLogin" class="profile-value">‚Äî</span>
      </div>
    </div>
  </div>
</section>
    </main>

  <!-- ===========================
       BOUTON PANIER FLOTTANT
       =========================== -->
  <button id="cartFab" class="cart-fab" type="button" onclick="openCart()">
    üõí
    <span id="cartBadge" class="cart-badge"></span>
  </button>

  <!-- ===========================
       PAGE PANIER FULLSCREEN
       =========================== -->
  <div id="cartModal" class="cart-page hidden" aria-hidden="true">
    <div class="cart-page-inner">
      <header class="cart-page-header">
        <div class="cart-page-title-block">
          <h2>Votre s√©lection</h2>
          <p>V√©rifie bien ta commande avant de demander ton devis.</p>
        </div>
        <button class="btn" type="button" onclick="closeCart()">‚úï</button>
      </header>

      <section class="cart-page-summary">
  <!-- ligne articles -->
  <div class="cart-summary-line">
    <span>Articles</span>
    <strong id="cartCount">0</strong>
  </div>

  <!-- label + boutons paiement -->
  <div class="cart-payment-label">
    Choisis ton mode de paiement :
  </div>
  <div class="cart-payment-methods">
    <button type="button" class="pay-btn" data-method="paypal"
            onclick="selectPayment('paypal')">üÖøÔ∏è</button>
    <button type="button" class="pay-btn" data-method="cash"
            onclick="selectPayment('cash')">üí∂</button>
    <button type="button" class="pay-btn" data-method="crypto"
            onclick="selectPayment('crypto')">‚Çø</button>
    <button type="button" class="pay-btn" data-method="tickets"
            onclick="selectPayment('tickets')">üéüÔ∏è</button>
  </div>

  <!-- totaux -->
  <div class="cart-summary-line">
    <span>Total produits</span>
    <strong id="cartTotal">0,00 ‚Ç¨</strong>
  </div>
  <div class="cart-summary-line">
    <span>Frais paiement / envoi</span>
    <strong id="cartFees">0,00 ‚Ç¨</strong>
  </div>
  <div class="cart-summary-line">
    <span>Total avec frais</span>
    <strong id="cartGrandTotal">0,00 ‚Ç¨</strong>
  </div>
</section>

      <section id="cartItems" class="cart-items"></section>

      <footer class="cart-page-footer">
        <button class="btn" type="button" onclick="clearCart()">Vider</button>
        <button class="btn primary" type="button" onclick="sendQuote()">Demander un devis</button>
      </footer>
    </div>
  </div>

  <!-- ===========================
       MENU BAS
       =========================== -->
  <nav class="bottom-nav">
    <button class="nav-btn active" data-tab="menu" onclick="switchTab(this)">
      <span class="icon">üè†</span>
      <span>Menu</span>
    </button>
    <button class="nav-btn" data-tab="infos" onclick="switchTab(this)">
      <span class="icon">‚ÑπÔ∏è</span>
      <span>Infos</span>
    </button>
    <button class="nav-btn" data-tab="canal" onclick="switchTab(this)">
      <span class="icon">üì¶</span>
      <span>Suivi</span>
    </button>
    <button class="nav-btn" data-tab="contact" onclick="switchTab(this)">
      <span class="icon">‚úâÔ∏è</span>
      <span>Contact</span>
    </button>
    <!-- üî• Nouveau bouton Profil -->
  <button class="nav-btn" data-tab="profil" onclick="switchTab(this)">
    <span class="icon">üë§</span>
    <span>Profil</span>
  </button>
  </nav>

  <!-- TOAST -->
  <div id="toast"></div>

  <!-- ===========================
       JS ‚Äì LOGIQUE APP
       =========================== -->
  <script>
    /* ===========================
       1) TELEGRAM / GLOBALS
       =========================== */
    var tg = (window.Telegram && window.Telegram.WebApp) ? window.Telegram.WebApp : null;
var QUOTE_USERNAME = "pssv2";

// Panier + historique
var CART = [];
var ORDER_HISTORY = [];

// Cl√©s de stockage local
var STORAGE_CART_KEY = 'pss_cart_v1';
var STORAGE_HISTORY_KEY = 'pss_history_v1';

var toastTimer = null;
// moyen de paiement choisi dans le panier : "paypal" | "cash" | "crypto" | "tickets"
var selectedPaymentMethod = null;

    /* ===========================
       2) NAVIGATION TABS
       =========================== */
    function switchTab(btn){
  var tab = btn.getAttribute('data-tab'); // menu / infos / canal / contact / profil

  // boutons nav
  var navs = document.querySelectorAll('.nav-btn');
  navs.forEach(function(n){ n.classList.remove('active'); });
  btn.classList.add('active');

  // onglets
  var targetId = 'tab-' + tab;
  document.querySelectorAll('.tab-panel').forEach(function(p){
    if (p.id === targetId){
      p.classList.add('active');
    } else {
      p.classList.remove('active');
    }
  });

  if (tab !== 'menu'){
    closeProduct(true);
  }

  closeCart(true);

  // on remonte simplement la page
  window.scrollTo(0, 0);
  document.documentElement.scrollTop = 0;
  document.body.scrollTop = 0;
}

    /* ===========================
       3) FICHES PRODUITS
       =========================== */
    function openProduct(id){
      var grid = document.getElementById('productGrid');
      if (grid) grid.style.display = 'none';

      document.querySelectorAll('[id^="productDetail_"]').forEach(function(e){
        e.classList.add('hidden');
      });

      var el = document.getElementById('productDetail_' + id);
      if (el) el.classList.remove('hidden');

      window.scrollTo(0,0);
    }

    function closeProduct(fromTabSwitch){
      document.querySelectorAll('[id^="productDetail_"]').forEach(function(e){
        e.classList.add('hidden');
      });
      var grid = document.getElementById('productGrid');
      if (grid) grid.style.display = 'grid';
      if (!fromTabSwitch) window.scrollTo(0,0);
    }

    /* ===========================
       4) INCREMENT / DECREMENT
       =========================== */
    function inc(id){
      var el = document.getElementById(id);
      var v = parseInt(el.value || '1', 10) || 1;
      el.value = v + 1;
    }

    function dec(id){
      var el = document.getElementById(id);
      var v = parseInt(el.value || '1', 10) || 1;
      v = v - 1;
      if (v < 1) v = 1;
      el.value = v;
    }

    /* ===========================
       5) ANIM : FLY TO CART
       =========================== */
    function flyToCart(fromBtn){
      try{
        var fab = document.getElementById('cartFab');
        if (!fab || !fromBtn) return;

        var r1 = fromBtn.getBoundingClientRect();
        var startX = r1.left + r1.width  / 2;
        var startY = r1.top  + r1.height / 2;

        var r2 = fab.getBoundingClientRect();
        var endX = r2.left + r2.width  / 2;
        var endY = r2.top  + r2.height / 2;

        var dx = endX - startX;
        var dy = endY - startY;

        var dot = document.createElement('div');
        dot.className = 'cart-flyer';
        dot.style.left = startX + 'px';
        dot.style.top  = startY + 'px';
        document.body.appendChild(dot);

        requestAnimationFrame(function(){
          dot.style.transform = 'translate('+dx+'px,'+dy+'px) scale(0.3)';
          dot.style.opacity   = '0';
        });

        setTimeout(function(){
          if (dot && dot.parentNode){
            dot.parentNode.removeChild(dot);
          }
        }, 650);
      }catch(e){
        console.error(e);
      }
    }

    /* ===========================
       6) FORMAT EUR
       =========================== */
    function euro(n){
      try {
        return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n||0);
      } catch(e){
        return (n||0).toFixed(2) + " ‚Ç¨";
      }
    }

    /* ===========================
       7) AJOUT PRODUITS (P1‚ÄìP7)
       =========================== */

    // P1 : Pochons
    function addP1(btn){
      try{
        var pack       = document.getElementById('p1_quantite').value;
        var taille     = document.getElementById('p1_taille').value;
        var finition   = document.getElementById('p1_finition').value;
        var impression = document.getElementById('p1_impression').value;
        var fenetre    = document.getElementById('p1_fenetre').value;
        var qty        = parseInt(document.getElementById('p1_qty').value || '1',10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i=0;i<CART.length;i++){
          var it = CART[i];
          if (it.title === 'Pochon personnalis√©' &&
              it.opts &&
              it.opts.quantitePack === pack &&
              it.opts.taille === taille &&
              it.opts.finition === finition &&
              it.opts.fenetre === fenetre &&
              it.opts.impression === impression){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title: 'Pochon personnalis√©',
            qty: qty,
            unit: 0,
            opts: {
              quantitePack: pack,
              taille: taille,
              finition: finition,
              fenetre: fenetre,
              impression: impression,
              minPrice: 0.8
            }
          });
        }

        renderCart();
        toast('Pochons ajout√©s');
        flyToCart(btn);
      }catch(e){
        console.error(e);
      }
    }

    // P2 : Tableaux
    function addP2(btn){
      try{
        var v = document.getElementById('p2_format').value;
        var parts = v.split('|');
        var type   = parts[0];
        var taille = parts[1];
        var unit   = parseFloat(parts[2] || '0') || 0;
        var qty    = parseInt(document.getElementById('p2_qty').value || '1',10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i=0;i<CART.length;i++){
          var it = CART[i];
          if (it.title === 'Tableau personnalis√©' &&
              it.opts &&
              it.opts.type === type &&
              it.opts.taille === taille){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title:'Tableau personnalis√©',
            qty:qty,
            unit:unit,
            opts:{type:type, taille:taille}
          });
        }

        renderCart();
        toast('Tableaux ajout√©s');
        flyToCart(btn);
      }catch(e){
        console.error(e);
      }
    }

    // P3 : Cartes
    function addP3(btn){
      try{
        var v = document.getElementById('p3_quantite').value;
        var parts = v.split('|');
        var quantite = parts[0];
        var unit     = parseFloat(parts[1] || '0') || 0;
        var qty      = parseInt(document.getElementById('p3_qty').value || '1',10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i=0;i<CART.length;i++){
          var it = CART[i];
          if (it.title === 'Cartes de fid√©lit√© / visite' &&
              it.opts &&
              it.opts.quantite === quantite){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title:'Cartes de fid√©lit√© / visite',
            qty:qty,
            unit:unit,
            opts:{quantite:quantite}
          });
        }

        renderCart();
        toast('Cartes ajout√©es');
        flyToCart(btn);
      }catch(e){
        console.error(e);
      }
    }

    // P4 : √âtiquettes
    function addP4(btn){
      try{
        var v = document.getElementById('p4_format').value;
        var parts = v.split('|');
        var formatLabel = parts[0];
        var unit        = parseFloat(parts[1] || '0') || 0;
        var qty         = parseInt(document.getElementById('p4_qty').value || '1',10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i=0;i<CART.length;i++){
          var it = CART[i];
          if (it.title === '√âtiquettes personnalis√©es' &&
              it.opts &&
              it.opts.format === formatLabel){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title:'√âtiquettes personnalis√©es',
            qty:qty,
            unit:unit,
            opts:{format:formatLabel}
          });
        }

        renderCart();
        toast('√âtiquettes ajout√©es');
        flyToCart(btn);
      }catch(e){
        console.error(e);
      }
    }

    // P5 : Scelleuse
    function addP5(btn){
      try{
        var qty = parseInt(document.getElementById('p5_qty').value || '1', 10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i = 0; i < CART.length; i++){
          var it = CART[i];
          if (it.title === 'Scelleuse'){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title: 'Scelleuse',
            qty: qty,
            unit: 10,
            opts: {}
          });
        }

        renderCart();
        toast('Scelleuse ajout√©e');
        flyToCart(btn);
      }catch(e){
        console.error(e);
      }
    }

    // P6 : Fus√©es
    function addP6(btn){
      try{
        var sel   = document.getElementById('p6_quantite');
        var opt   = sel.options[sel.selectedIndex];
        var label = opt.text;
        var unit  = parseFloat(opt.getAttribute('data-price') || '0') || 0;

        var qty = parseInt(document.getElementById('p6_qty').value || '1', 10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i = 0; i < CART.length; i++){
          var it = CART[i];
          if (it.title === 'Fus√©es 1,5 ml' &&
              it.opts && it.opts.quantite === label){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title: 'Fus√©es 1,5 ml',
            qty: qty,
            unit: unit,
            opts: {
              quantite: label
            }
          });
        }

        renderCart();
        toast('Fus√©es ajout√©es');
        flyToCart(btn);
      }catch(e){
        console.error(e);
      }
    }

    // P7 : Design
    function addP7(btn){
      try{
        var v = document.getElementById('p7_formule').value;
        var parts   = v.split('|');
        var formule = parts[0];
        var unit    = parseFloat(parts[1] || '0') || 0;
        var delai   = parts[2];

        var qty = parseInt(document.getElementById('p7_qty').value || '1', 10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i = 0; i < CART.length; i++){
          var it = CART[i];
          if (it.title === 'Design personnalis√©' &&
              it.opts &&
              it.opts.formule === formule &&
              it.opts.delai === delai){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title: 'Design personnalis√©',
            qty: qty,
            unit: unit,
            opts: {
              formule: formule,
              delai: delai
            }
          });
        }

        renderCart();
        toast('Design ajout√© au panier');
        flyToCart(btn);
      }catch(e){
        console.error(e);
      }
    }
    
        // P8 : PACKS COMPLETS
function addPack(kind, btn){
  try{
    var config = {
      starter: {
        title: 'Pack Starter',
        price: 480,
        contenu: '500 pochons ‚Ä¢ 1 design basique ‚Ä¢ 1 lot d‚Äô√©tiquettes'
      },
      boost: {
        title: 'Pack Boost',
        price: 700,
        contenu: '1000 pochons ‚Ä¢ multi-design + fen√™tre ‚Ä¢ 250 cartes ‚Ä¢ mini pack identit√©'
      },
      pro: {
        title: 'Pack Pro',
        price: 1140,
        contenu: '1500‚Äì2000 pochons premium ‚Ä¢ 500 cartes ‚Ä¢ pack identit√© + 400 √©tiquettes premium ‚Ä¢ scelleuse'
      },
      boss: {
        title: 'Pack Boss',
        price: 1500,
        contenu: '2000+ pochons premium ‚Ä¢ 1000 cartes ‚Ä¢ full identit√© ‚Ä¢ 400 √©tiquettes ‚Ä¢ scelleuse ‚Ä¢ tableau 60x40cm'
      }
    };

    var c = config[kind];
    if (!c) return;

    var merged = false;
    for (var i = 0; i < CART.length; i++){
      var it = CART[i];
      if (it.title === c.title){
        it.qty += 1;
        merged = true;
        break;
      }
    }

    if (!merged){
      CART.push({
        title: c.title,
        qty: 1,
        unit: c.price,   // tu ajusteras les prix si tu veux
        opts: {
          type: kind,
          contenu: c.contenu
        }
      });
    }

        renderCart();
    toast(c.title + ' ajout√© au panier');
    flyToCart(btn);
    // petit effet de "bump" sur le bouton panier
    var fab = document.getElementById('cartFab');
    if (fab){
      fab.style.transition = 'transform .18s ease-out';
      fab.classList.add('bump-cart');
      setTimeout(function(){
        fab.classList.remove('bump-cart');
      }, 220);
    }
  }catch(e){
    console.error(e);
  }
}

    /* ===========================
       8) PANIER : OUVERTURE / RENDER
       =========================== */
    function openCart(){
      renderCart();
      var modal = document.getElementById('cartModal');
      if (modal){
        modal.classList.remove('hidden');
        modal.classList.add('show');
      }
      var fab = document.getElementById('cartFab');
      if (fab) fab.style.display = 'none';
    }

    function closeCart(){
      var modal = document.getElementById('cartModal');
      if (modal){
        modal.classList.remove('show');
        modal.classList.add('hidden');
      }
      var fab = document.getElementById('cartFab');
      if (fab) fab.style.display = 'block';
    }
    
    var selectedPaymentMethod = null;

    function selectPayment(method){

  // visuel : bouton actif
  document.querySelectorAll('.pay-btn').forEach(function(btn){
    btn.classList.remove('active');
  });
  var active = document.querySelector('.pay-btn[data-method="'+method+'"]');
  if (active) active.classList.add('active');

  // recalcul des frais + total avec frais
  computeCurrentFees();
}

    function computeCurrentFees(){
  var totalEl = document.getElementById('cartTotal');
  var feesEl  = document.getElementById('cartFees');
  var grandEl = document.getElementById('cartGrandTotal');
  if (!totalEl || !feesEl || !grandEl) return;

  // r√©cup√®re le total produits
  var raw = totalEl.textContent.replace(/\s/g,'').replace('‚Ç¨','').replace(',','.');
  var total = parseFloat(raw) || 0;

  // r√©cup√®re le mode de paiement via le bouton actif
  var activeBtn = document.querySelector('.pay-btn.active');
  var method = activeBtn ? activeBtn.getAttribute('data-method') : null;

  // garde aussi la valeur dans la variable globale au cas o√π
  selectedPaymentMethod = method;

  var fees  = computePaymentFees(total, method);
  var grand = total + fees;

  feesEl.textContent  = euro(fees);
  grandEl.textContent = euro(grand);
}

    function computePaymentFees(total, method){
  // si la m√©thode n'est pas pass√©e en param√®tre, on prend la globale
  method = method || selectedPaymentMethod;

  if (!method) return 0;

  // PAYPAL ou CRYPTO ‚Üí +20 ‚Ç¨
  if (method === 'paypal' || method === 'crypto'){
    return 20;
  }

  // MAIN PROPRE ‚Üí 0 ‚Ç¨
  if (method === 'cash'){
    return 0;
  }

  // TICKETS ‚Üí frais selon le total des produits
  if (method === 'tickets'){
    if (total <= 200) return 20;
    if (total <= 450) return 40;
    return 60;
  }

  return 0;
}

    /* ===========================
   PERSISTANCE PANIER / HISTORIQUE
   =========================== */
function loadCartFromStorage(){
  try {
    var raw = localStorage.getItem(STORAGE_CART_KEY);
    if (!raw) return;
    var data = JSON.parse(raw);
    if (Array.isArray(data)) {
      CART = data;
    }
  } catch(e){
    console.error('Erreur loadCartFromStorage', e);
  }
}

function saveCartToStorage(){
  try {
    localStorage.setItem(STORAGE_CART_KEY, JSON.stringify(CART));
  } catch(e){
    console.error('Erreur saveCartToStorage', e);
  }
}

function loadHistoryFromStorage(){
  try {
    var raw = localStorage.getItem(STORAGE_HISTORY_KEY);
    if (!raw) return;
    var data = JSON.parse(raw);
    if (Array.isArray(data)) {
      ORDER_HISTORY = data;
    }
  } catch(e){
    console.error('Erreur loadHistoryFromStorage', e);
  }
}

function saveHistoryToStorage(){
  try {
    localStorage.setItem(STORAGE_HISTORY_KEY, JSON.stringify(ORDER_HISTORY));
  } catch(e){
    console.error('Erreur saveHistoryToStorage', e);
  }
}

    /* ===========================
   PROFIL TELEGRAM
   =========================== */
function initProfileFromTelegram(){
  try{
    var avatarEl = document.getElementById('profileAvatarLetter');
    var displayNameEl = document.getElementById('profileDisplayName');
    var handleEl = document.getElementById('profileHandle');

    var idEl = document.getElementById('profileId');
    var fnEl = document.getElementById('profileFirstName');
    var lnEl = document.getElementById('profileLastName');
    var userEl = document.getElementById('profileUsername');
    var langEl = document.getElementById('profileLang');

    if (!tg || !tg.initDataUnsafe || !tg.initDataUnsafe.user){
      if (displayNameEl) displayNameEl.textContent = "Utilisateur anonyme";
      if (handleEl) handleEl.textContent = "Ouvre la mini-app depuis Telegram pour voir ton profil.";
      if (avatarEl) avatarEl.textContent = "?";
      return;
    }

    var u = tg.initDataUnsafe.user;

    var first = u.first_name || "";
    var last  = u.last_name || "";
    var full  = (first + " " + last).trim() || "Utilisateur Telegram";

    if (displayNameEl) displayNameEl.textContent = full;
    if (handleEl){
      handleEl.textContent = u.username ? ("@" + u.username) : "(pas de pseudo public)";
    }

    if (avatarEl){
      var letter = (first || full).trim().charAt(0).toUpperCase() || "P";
      avatarEl.textContent = letter;
    }

    if (idEl)   idEl.textContent   = u.id || "‚Äî";
    if (fnEl)   fnEl.textContent   = first || "‚Äî";
    if (lnEl)   lnEl.textContent   = last || "‚Äî";
    if (userEl) userEl.textContent = u.username ? ("@" + u.username) : "‚Äî";
    if (langEl) langEl.textContent = (u.language_code || "‚Äî").toUpperCase();
  }catch(e){
    console.error('initProfileFromTelegram error', e);
  }
}

/* ===========================
   RENDU HISTORIQUE
   =========================== */
function renderHistory(){
  var box = document.getElementById('historyList');
  if (!box) return;

  if (!ORDER_HISTORY.length){
    box.innerHTML =
      '<p class="item-sub" style="margin:4px 0 0;">' +
      'Aucun devis enregistr√© pour le moment.' +
      '</p>';
    return;
  }

  box.innerHTML = '';

  // dernier devis en premier
  var items = ORDER_HISTORY.slice().reverse();

  items.forEach(function(h, index){
    var div = document.createElement('div');
    div.className = 'history-entry';

    var d = new Date(h.date || Date.now());

    var header = document.createElement('div');
    header.className = 'history-entry-header';

    var title = document.createElement('div');
    title.className = 'history-entry-title';
    title.textContent = 'Devis #' + (items.length - index);

    var total = document.createElement('div');
    total.className = 'history-entry-total';
    total.textContent = euro(h.totalWithFees || h.totalProducts || 0);

    header.appendChild(title);
    header.appendChild(total);

    var sub = document.createElement('div');
    sub.className = 'history-entry-items';

    var countItems = 0;
    if (Array.isArray(h.items)){
      h.items.forEach(function(it){ countItems += (it.qty || 0); });
    }

    sub.textContent =
      d.toLocaleString('fr-FR',{dateStyle:'short', timeStyle:'short'}) +
      ' ‚Ä¢ ' + countItems + ' article(s)';

    div.appendChild(header);
    div.appendChild(sub);
    box.appendChild(div);
  });
}

    function initAppInfo(){
  try{
    var lastLoginEl = document.getElementById('profileLastLogin');
    var sessionEl   = document.getElementById('profileSession');

    var now = new Date();
    if (lastLoginEl){
      lastLoginEl.textContent = now.toLocaleString('fr-FR',{
        dateStyle:'long',
        timeStyle:'short'
      });
    }

    if (sessionEl){
      // si pour une raison quelconque tg n‚Äôest pas dispo, on met "Hors ligne"
      if (!tg){
        sessionEl.textContent = "Hors ligne";
        sessionEl.classList.remove('profile-pill-ok');
      }
    }
  }catch(e){
    console.error('initAppInfo error', e);
  }
}

    function renderCart(){
      try{
        var box   = document.getElementById('cartItems');
        var total = 0;
        var count = 0;
        if (!box) return;

        box.innerHTML = '';

        if (!CART.length){
          box.innerHTML =
            '<p class="item-sub" style="text-align:center;margin-top:8px;">' +
            'Votre panier est vide pour le moment.' +
            '</p>';
        }

        CART.forEach(function(it, idx){
          total += (it.unit || 0) * it.qty;
          count += it.qty || 0;

          var row = document.createElement('div');
          row.className = 'cart-item';

          var left = document.createElement('div');

          var idxLabel = document.createElement('div');
          idxLabel.className = 'cart-item-index';
          idxLabel.textContent = '#' + (idx+1);

          var title = document.createElement('div');
          title.className = 'item-title';
          title.textContent = it.title + ' √ó ' + it.qty;

          var summaryParts = [];
          if (it.opts){
            if (it.opts.quantitePack) summaryParts.push('pack : ' + it.opts.quantitePack);
            if (it.opts.impression)   summaryParts.push('impression : ' + it.opts.impression);
            if (it.opts.type)         summaryParts.push('type : ' + it.opts.type);
            if (it.opts.taille)       summaryParts.push('taille : ' + it.opts.taille);
            if (it.opts.quantite)     summaryParts.push('quantit√© : ' + it.opts.quantite);
            if (it.opts.format)       summaryParts.push('format : ' + it.opts.format);
          }

          var priceInfo;
          if (it.unit && it.unit > 0){
            priceInfo = euro(it.unit) + ' /u';
          } else if (it.opts && it.opts.minPrice){
            priceInfo = '√† partir de ' + euro(it.opts.minPrice) + ' (500 pcs)';
          } else {
            priceInfo = 'sur devis';
          }

          var sub = document.createElement('div');
          sub.className = 'item-sub';
          sub.textContent =
            (summaryParts.length ? summaryParts.join(' ‚Ä¢ ') + ' | ' : '') +
            priceInfo;

          left.appendChild(idxLabel);
          left.appendChild(title);
          left.appendChild(sub);

          var right = document.createElement('div');
          right.className = 'item-right';

          if (it.unit && it.unit > 0){
            var itemTotal = document.createElement('div');
            itemTotal.className = 'item-price';
            itemTotal.textContent = euro((it.unit || 0) * it.qty);
            right.appendChild(itemTotal);
          }

          var del = document.createElement('button');
          del.className = 'btn-remove';
          del.type = 'button';
          del.textContent = 'Supprimer';
          del.onclick = function(){
            CART.splice(idx,1);
            renderCart();
          };

          right.appendChild(del);
          row.appendChild(left);
          row.appendChild(right);
          box.appendChild(row);
        });
        
        var fees = computePaymentFees(total, selectedPaymentMethod);
        var grandTotal = total + fees;

        var totalEl = document.getElementById('cartTotal');
        if (totalEl) totalEl.textContent = euro(total);

        var countEl = document.getElementById('cartCount');
        if (countEl) countEl.textContent = count;

        var feesEl = document.getElementById('cartFees');
        if (feesEl) feesEl.textContent = euro(fees);

        var grandEl = document.getElementById('cartGrandTotal');
        if (grandEl) grandEl.textContent = euro(grandTotal);

        var badgeEl = document.getElementById('cartBadge');
        if (badgeEl){
          var distinctCount = CART.length;
          if (distinctCount > 0){
            badgeEl.textContent = distinctCount;
            badgeEl.style.display = 'flex';
          } else {
            badgeEl.style.display = 'none';
          }
        }
              // --- Sauvegarde du panier apr√®s rendu ---
      saveCartToStorage();
      }catch(e){
        console.error(e);
      }
    }

    function clearCart(){
  CART = [];
  renderCart();
  saveCartToStorage();
}

    /* ===========================
       9) ENVOI DU DEVIS
       =========================== */
    function sendQuote(){
  if (!CART.length){
    toast("Ajoutez des articles au panier.");
    return;
  }

  if (!selectedPaymentMethod){
    toast("Choisis un moyen de paiement dans le panier.");
    return;
  }

  try{
    var lines = [];
    lines.push("üßæ Demande de devis ‚Äì PochonStore");
    lines.push("");
    lines.push("D√©tail du panier :");
    lines.push("");

    var total = 0;

    for (var i = 0; i < CART.length; i++){
      var it = CART[i];
      var index = i + 1;

      var ligneTitre = index + ") " + it.title + " √ó " + it.qty;
      if (it.unit){
        ligneTitre += " ‚Äî " + euro(it.unit) + " /u";
      }
      lines.push(ligneTitre);

      if (it.opts){
        var parts = [];
        for (var key in it.opts){
          if (!Object.prototype.hasOwnProperty.call(it.opts, key)) continue;
          var value = it.opts[key];
          if (value === undefined || value === null || value === "") continue;

          var label = key.replace(/_/g," ").replace(/^\w/, function(c){return c.toUpperCase();});
          parts.push(label + " : " + value);
        }
        if (parts.length){
          lines.push("   ‚Ä¢ " + parts.join("\n   ‚Ä¢ "));
        }
      }

      if (it.unit){
        var sousTotal = (it.unit || 0) * it.qty;
        total += sousTotal;
        lines.push("   Sous-total estim√© : " + euro(sousTotal));
      }

      lines.push("");
    }

    // === PARTIE FRAIS / MOYEN DE PAIEMENT ===
    var fees = computePaymentFees(total, selectedPaymentMethod);
    var grandTotal = total + fees;
    
        // === Sauvegarde dans l‚Äôhistorique local ===
    var snapshot = {
      date: new Date().toISOString(),
      items: CART.map(function(it){
        return {
          title: it.title,
          qty: it.qty,
          unit: it.unit || 0,
          opts: it.opts || {}
        };
      }),
      paymentMethod: selectedPaymentMethod || null,
      totalProducts: total,
      fees: fees,
      totalWithFees: grandTotal
    };

    ORDER_HISTORY.push(snapshot);
    saveHistoryToStorage();

    var paymentLabel;
    switch(selectedPaymentMethod){
      case 'paypal':  paymentLabel = "PayPal"; break;
      case 'cash':    paymentLabel = "Main propre"; break;
      case 'crypto':  paymentLabel = "Crypto"; break;
      case 'tickets': paymentLabel = "Tickets"; break;
      default:        paymentLabel = "Non pr√©cis√©"; break;
    }

    lines.push("Mode de paiement souhait√© : " + paymentLabel);

    if (fees > 0){
      lines.push("Frais associ√©s √† ce mode : " + euro(fees));
    } else {
      lines.push("Frais associ√©s √† ce mode : 0,00 ‚Ç¨");
    }

    lines.push("Total estim√© avec frais : " + euro(grandTotal));
    lines.push("");

    // rappel du total produits seul
    lines.push("Total estim√© (produits seuls, min connu) : " + euro(total));
    lines.push("");
    lines.push("Merci de v√©rifier les informations puis d‚Äôenvoyer ce message √† PochonStore pour finaliser le devis.");

    var message = lines.join("\n");

    var url = "https://t.me/share/url"
      + "?url="  + encodeURIComponent("https://t.me/" + QUOTE_USERNAME)
      + "&text=" + encodeURIComponent(message);

    if (tg && tg.openTelegramLink){
      tg.openTelegramLink(url);
    } else {
      window.open(url, "_blank");
    }

    closeCart(true);
    toast("Ouverture du chat avec PochonStore‚Ä¶");
        // Mettre √† jour le rendu de l‚Äôhistorique dans l‚Äôonglet Profil
    renderHistory();
  }catch(e){
    console.error(e);
    toast("Erreur lors de la pr√©paration du devis.");
  }
}

    /* ===========================
       10) TOAST
       =========================== */
    function toast(msg){
      var el = document.getElementById('toast');
      if (!el) return;
      el.textContent = msg;
      el.style.opacity = '1';
      clearTimeout(toastTimer);
      toastTimer = setTimeout(function(){
        el.style.opacity = '0';
      },1800);
    }

    /* ===========================
       11) LIENS TELEGRAM
       =========================== */
    function openChannel(){
      var url = "https://t.me/+BQ5eqgaiZG80MTY0";
      if (tg && tg.openTelegramLink){
        tg.openTelegramLink(url);
      } else {
        window.open(url,'_blank');
      }
    }

    function openContact(){
      var url = "https://t.me/" + QUOTE_USERNAME;
      if (tg && tg.openTelegramLink){
        tg.openTelegramLink(url);
      } else {
        window.open(url,'_blank');
      }
    }

    function openTrackBot(){
      var baseUrl = "https://t.me/TrackBot";
      var input   = document.getElementById('trackingNumber');
      var url     = baseUrl;

      if (input){
        var num = input.value.trim();
        if (num){
          url = baseUrl + "?start=" + encodeURIComponent(num);
        }
      }

      if (tg && tg.openTelegramLink){
        tg.openTelegramLink(url);
      } else {
        window.open(url, "_blank");
      }
    }

    function openLinksHub(){
      var url = "https://linktr.ee/pochons";
      if (tg && tg.openLink){
        tg.openLink(url);
      } else {
        window.open(url, "_blank");
      }
    }
    
    function openDevService(){
  var baseUrl = "https://t.me/" + QUOTE_USERNAME;

  var intro =
    "üëã Salut, je viens de ta boutique PochonStore.\n" +
    "Je suis int√©ress√©(e) par le d√©veloppement d‚Äôune mini-app / WebApp sur mesure.\n\n" +
    "Voici quelques infos sur mon projet :\n" +
    "- Type d‚Äôactivit√© : \n" +
    "- Nombre de produits : \n" +
    "- Fonctionnalit√©s souhait√©es (catalogue, panier, devis, etc.) : \n" +
    "- Budget approximatif : \n";

  var url = "https://t.me/share/url"
    + "?url="  + encodeURIComponent(baseUrl)
    + "&text=" + encodeURIComponent(intro);

  if (tg && tg.openTelegramLink){
    tg.openTelegramLink(url);
  } else {
    window.open(url, "_blank");
  }
}

    /* ===========================
       12) SPLASH FLOW
       =========================== */
    document.addEventListener('DOMContentLoaded', function(){
  // 1) Splash
  var splash = document.getElementById('splash');
  if (splash){
    setTimeout(function(){
      splash.classList.add('splash--show-text');
    }, 400);

    setTimeout(function(){
      splash.classList.add('splash--show-dots');
    }, 900);

    setTimeout(function(){
      splash.classList.add('splash--hide');
      setTimeout(function(){
        if (splash && splash.parentNode){
          splash.parentNode.removeChild(splash);
        }
      }, 600);
    }, 4500);
  }

  // 2) Charger le panier et l‚Äôhistorique depuis le stockage local
  loadCartFromStorage();
  renderCart();           // met √† jour les totaux + badge

  loadHistoryFromStorage();
  renderHistory();        // on va cr√©er cette fonction juste apr√®s

  // 3) Hydrater le profil Telegram (si dispo)
  initProfileFromTelegram();  // profil user
  initAppInfo();              // carte infos appli
});
  </script>
</body>
</html>

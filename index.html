<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>PochonStore</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root {
      --bg: #0e0e0e;
      --card: #1a1a1a;
      --text: #fff;
      --muted: #bdbdbd;
      --accent: #d4af37;
      --border: #2a2a2a;
      --radius: 14px;
    }

    * {
      box-sizing: border-box;
    }

    html, body{
  margin: 0;
  padding: 0;
  height: 100%;
  touch-action: manipulation;
  overscroll-behavior-y: none;   /* emp√™che le gros rebond vers le haut/bas */
  overflow-x: hidden;
  color: #fff;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, sans-serif;
  position: relative;
}

/* fond g√©n√©ral de la mini-app */
body{
  background: #050505;
  position: relative;
  overflow-x: hidden;
}

/* grand fond avec le logo derri√®re tout */
body::before{
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  background: url("img/bgpss.png") center/cover no-repeat;
  opacity: 1;
}

/* film visuel par-dessus le fond */
body::after{
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(circle at 70% 80%, rgba(255,215,100,0.08), transparent 60%),
    rgba(0,0,0,0.45);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* === S√©quence d'apparition pour la page Contact === */
#tab-contact .contact-seq{
  opacity: 0;
  transform: translateY(12px) scale(0.96);
  animation: contactPop 0.6s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
  animation-delay: var(--delay, 0s);  /* d√©lai personnalis√© par bloc */
}

/* petit survol sur chaque carte de contact */
#tab-contact .info-card{
  transition: transform .22s ease-out, box-shadow .22s ease-out;
}

#tab-contact .info-card:hover{
  transform: translateY(-4px);
  box-shadow: 0 10px 26px rgba(0,0,0,0.45);
}

/* animation "pop" douce */
@keyframes contactPop{
  0%{
    opacity: 0;
    transform: translateY(18px) scale(0.94);
  }
  70%{
    opacity: 1;
    transform: translateY(-3px) scale(1.02);
  }
  100%{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

    /* ==== SPLASH NOIR / DOR√â ==== */
.splash{
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  background:
    radial-gradient(circle at 30% 0%, rgba(255,215,100,0.25) 0%, transparent 45%),
    radial-gradient(circle at 70% 100%, rgba(255,215,100,0.20) 0%, transparent 55%),
    #050505;
  overflow: hidden;
  opacity: 1;
  transform: scale(1);
  transition: opacity .5s ease-out, transform .5s ease-out;
}

.splash--hide{
  opacity: 0;
  transform: scale(1.03);
  pointer-events: none;
}

.splash-inner{
  text-align: center;
  animation: splash-pop 0.7s ease-out forwards;
}

/* cercle avec le logo */
.splash-logo{
  width: 170px;
  height: 170px;
  border-radius: 50%;
  border: 2px solid rgba(255,215,100,0.9);
  box-shadow:
    0 0 25px rgba(255,215,100,0.55),
    0 18px 40px rgba(0,0,0,0.75);
  background: radial-gradient(circle at 30% 20%, #3a2600, #050505);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 22px;
  position: relative;
  overflow: hidden;
}

.splash-logo img{
  width: 80%;
  height: auto;
  filter: drop-shadow(0 0 12px rgba(0,0,0,0.9));
}

/* halo dor√© anim√© derri√®re le logo */
.splash-logo::after{
  content: "";
  position: absolute;
  width: 180%;
  height: 180%;
  background: radial-gradient(circle, rgba(255,215,100,0.35) 0%, transparent 60%);
  opacity: 0.0;
  transform: scale(0.6);
  animation: splash-glow 1.6s ease-out infinite;
}

/* texte sous le logo : cach√© au d√©but */
.splash-title,
.splash-sub{
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .45s ease-out, transform .45s ease-out;
}

.splash-title{
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: .08em;
  text-transform: uppercase;
  margin-bottom: 4px;
  background: linear-gradient(120deg, #ffd766, #f3c13a, #ffffff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.splash-sub{
  font-size: .9rem;
  color: #d0d0d0;
}

/* quand on ajoute la classe, le texte appara√Æt */
.splash--show-text .splash-title,
.splash--show-text .splash-sub{
  opacity: 1;
  transform: translateY(0);
}

/* ===== Trois petits points ===== */
.splash-dots{
  margin-top: 18px;
  display:flex;
  justify-content:center;
  gap:8px;
  opacity:0;
  transform: translateY(4px);
  transition: opacity .4s ease, transform .4s ease;
}

.splash-dots span{
  width:8px;
  height:8px;
  border-radius:50%;
  background:#ffd766;
  box-shadow:0 0 12px rgba(255,215,100,0.7);
  animation:splash-dot 1s ease-in-out infinite;
}

.splash-dots span:nth-child(2){ animation-delay:.15s; }
.splash-dots span:nth-child(3){ animation-delay:.30s; }

.splash--show-dots .splash-dots{
  opacity: 1;
  transform: translateY(0);
}

/* animations */
@keyframes splash-pop{
  0%{
    opacity: 0;
    transform: translateY(10px) scale(0.9);
  }
  60%{
    opacity: 1;
    transform: translateY(0) scale(1.02);
  }
  100%{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes splash-glow{
  0%{
    opacity: 0;
    transform: scale(0.6);
  }
  40%{
    opacity: 0.5;
    transform: scale(1);
  }
  100%{
    opacity: 0;
    transform: scale(1.25);
  }
}

@keyframes splash-dot{
  0%, 80%, 100%{
    transform: translateY(0);
    opacity:.4;
  }
  40%{
    transform: translateY(-5px);
    opacity:1;
  }
}

    /* ===== BANNI√àRE FLOUE ===== */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      background: rgba(255, 215, 102, 0.05);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid rgba(255, 215, 102, 0.15);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .header-overlay {
      position: absolute;
      inset: 0;
      background: transparent;
    }

    .header-logo {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-height: 80px;
      width: auto;
      object-fit: contain;
      filter: drop-shadow(0 0 12px rgba(212, 175, 55, 0.8));
    }

    /* ==== CONTENU PRINCIPAL ==== */
main {
  display: block;
  height: 100vh;
  padding-top: 160px;
  padding-bottom: 110px;
  box-sizing: border-box;
  overflow-y: auto;                /* seul endroit qui scrolle */
  -webkit-overflow-scrolling: touch; /* ‚úÖ scroll fluide iOS */
  scroll-behavior: smooth;         /* ‚úÖ transition douce */
  overscroll-behavior-y: none;     /* bloque le ‚Äúrebond‚Äù sans tout figer */
}
    .tab-panel {
      display: none;
    }
    .tab-panel.active {
      display: block;
    }

    /* ===== GRILLE PRODUITS (onglet Menu) ===== */
    .product-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      padding: 16px;
    }

    /* ===== CARTES PRODUITS (catalogue) ===== */
.product-thumb{
  position: relative;                 /* important pour ::before / ::after */
  border-radius: 22px;
  overflow: hidden;
  padding: 0;
  display: flex;
  flex-direction: column;
  background: #111;                   /* fond de base */
  box-shadow: 0 6px 18px rgba(0,0,0,0.6);
  border: 1px solid rgba(255,215,100,0.25);
  transition: transform .18s ease-out, box-shadow .18s ease-out;
}

/* === Apparition anim√©e des cartes du catalogue === */
.product-thumb {
  position: relative;
  border-radius: 22px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  background: #111;
  border: 1px solid rgba(255,215,100,0.25);
  box-shadow: 0 6px 18px rgba(0,0,0,0.6);
  transition: transform .2s ease, box-shadow .2s ease;
  opacity: 0;
  transform: scale(0.94) translateY(20px);
  animation: productEnter 1.1s ease forwards;
}

/* animation globale : fade + petit zoom */
@keyframes productEnter {
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(26px);
    filter: brightness(0.7);
  }
  40% {
    opacity: 1;
    transform: scale(1.03) translateY(0);
    filter: brightness(1.08);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: brightness(1);
  }
}

/* effet l√©ger quand on survole une carte */
.product-thumb:hover {
  transform: scale(1.03);
  box-shadow: 0 0 12px rgba(255,215,100,0.3);
}

/* Apparition en cascade */
.product-grid .product-thumb:nth-child(1) { animation-delay: 0.15s; }
.product-grid .product-thumb:nth-child(2) { animation-delay: 0.35s; }
.product-grid .product-thumb:nth-child(3) { animation-delay: 0.55s; }
.product-grid .product-thumb:nth-child(4) { animation-delay: 0.75s; }
.product-grid .product-thumb:nth-child(5) { animation-delay: 0.95s; }
.product-grid .product-thumb:nth-child(6) { animation-delay: 1.15s; }
.product-grid .product-thumb:nth-child(7) { animation-delay: 1.35s; }

/* image */
.product-thumb img{
  width: 100%;
  height: 150px;
  object-fit: cover;
  display: block;
}

/* texte */
.product-thumb-body{
  padding: 10px;
  text-align: left;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

.product-thumb-title{
  font-weight: 700;
  font-size: 1rem;
  margin: 0 0 4px;
  background: linear-gradient(90deg, #FFD54A, #FFB300, #FFF176);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.product-thumb-sub{
  font-size: 0.8rem;
  color: #d0d0d0;
  margin: 0;
}

/* ===== contour dor√© anim√© (tour complet) ===== */
.product-thumb::before{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 2px solid rgba(255,215,100,0.9);
  box-shadow:
    0 0 8px rgba(255,215,100,0.6),
    0 0 18px rgba(0,0,0,0.8);
  pointer-events: none;
  z-index: 1;
  animation: cardBorderGlow 3s ease-in-out infinite;
}

@keyframes cardBorderGlow{
  0%{
    opacity: 0.7;
    box-shadow:
      0 0 6px rgba(255,215,100,0.4),
      0 0 14px rgba(0,0,0,0.8);
  }
  50%{
    opacity: 1;
    box-shadow:
      0 0 14px rgba(255,215,100,1),
      0 0 22px rgba(0,0,0,0.9);
  }
  100%{
    opacity: 0.7;
    box-shadow:
      0 0 6px rgba(255,215,100,0.4),
      0 0 14px rgba(0,0,0,0.8);
  }
}

/* petit ‚Äúpress‚Äù quand on clique la carte */
.product-thumb:active{
  transform: translateY(2px) scale(0.97);
  box-shadow: 0 3px 10px rgba(0,0,0,0.7);
}
  
  /* ===== halo dor√© dans un coin ===== */
.product-thumb::after{
  content: "";
  position: absolute;
  top: -6px;
  right: -6px;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 2;

  background: radial-gradient(
    circle,
    rgba(255,215,100,0.95) 0%,
    rgba(255,215,100,0.0) 65%
  );
  opacity: 0;
  animation: cardCornerGlow 2.4s ease-in-out infinite;
}

@keyframes cardCornerGlow {
  0%{
    opacity: 0;
    transform: translate(10px,10px) scale(0.4);
  }
  40%{
    opacity: 1;
    transform: translate(0,0) scale(1);
  }
  100%{
    opacity: 0;
    transform: translate(-4px,-4px) scale(0.7);
  }
}

    /* ===== FICHES PRODUITS ===== */
    .hidden {
      display: none;
    }

    .product-detail {
      padding: 16px;
    }

    .btn-back {
      border: 1px solid var(--border);
      background: #111;
      color: #fff;
      padding: 8px 14px;
      border-radius: 10px;
      margin-bottom: 12px;
    }

    .detail-media img {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
      display: block;
    }

    .product-card {
      background: rgba(20, 20, 20, 0.85);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border: 1px solid rgba(255, 215, 100, 0.2);
      box-shadow: 0 0 10px rgba(255, 215, 100, 0.1);
      border-radius: 10px;
      padding: 16px;
    }

    .product-title {
      margin-top: 0;
      margin-bottom: 8px;
      color: #ffd766;
    }

    .product-desc {
      margin-top: 0;
      margin-bottom: 10px;
      color: var(--muted);
    }

    .product-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .pill {
      padding: 4px 8px;
      border: 1px solid var(--border);
      border-radius: 16px;
      color: var(--muted);
      font-size: 0.85rem;
    }

    .product-options label {
      display: block;
      margin: 8px 0;
      color: var(--muted);
      font-size: 0.9rem;
    }

    .product-options select {
      margin-left: 4px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #111;
      color: var(--text);
      padding: 4px 6px;
    }

    .qty-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .qty-row button {
      background: #222;
      color: #fff;
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 5px;
    }

    .qty-row input {
      background: #111;
      color: #fff;
      border: 1px solid var(--border);
      width: 60px;
      text-align: center;
      border-radius: 6px;
      padding: 4px;
    }

    .btn {
      background: #222;
      color: #fff;
      border: 1px solid var(--border);
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
    }

    .btn.primary {
      background: var(--accent);
      color: #000;
      font-weight: 600;
      border-radius: 8px;
      padding: 8px 12px;
      border: none;
    }

    /* ===== CARTES INFO / CANAL / CONTACT ===== */
    .info-card {
      margin: 16px;
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      border: 1px solid var(--border);
    }

    .info-card h2 {
      margin-top: 0;
      margin-bottom: 8px;
      color: #ffd766;
    }

    .info-card p {
      margin-top: 0;
      color: var(--muted);
    }

    /* ===== MENU BAS FIXE ===== */
.bottom-nav{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: 78px;
  display: flex;
  align-items: center;
  justify-content: space-around;
  background: rgba(5,5,6,0.97);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-top: 1px solid rgba(255,255,255,0.06);
  z-index: 300;
  overflow: visible;              /* pour laisser d√©passer la lueur */
}

/* petite lueur dor√©e qui se prom√®ne au-dessus du menu */
.bottom-nav::before{
  content:"";
  position:absolute;
  left: 10%;
  right: 10%;
  top: -3px;
  height: 3px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,215,100,0.95),
    transparent
  );
  opacity: 0.85;
  filter: blur(0.5px);
  animation: navSweep 3s linear infinite;
}

@keyframes navSweep{
  0%   { transform: translateX(-40%); }
  50%  { transform: translateX(40%); }
  100% { transform: translateX(-40%); }
}

    /* ======== BOUTONS DU MENU BAS (rebond doux dor√©) ======== */
.nav-btn{
  flex: 1;
  border: none;
  background: transparent;
  color: #bdbdbd;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size: 0.78rem;
  position: relative;
  transition: transform .25s ease-out, color .25s ease-out;
}

.nav-btn span.icon{
  font-size: 1.2rem;
  margin-bottom: 2px;
  position: relative;
  transition: transform .25s ease-out, filter .25s ease-out;
}

/* ---- √©tat actif ---- */
.nav-btn.active{
  color: #d4af37;
  font-weight: 600;
  animation: bounceGold 0.7s ease-out;
}

.nav-btn.active span.icon{
  transform: translateY(-3px);
  filter: drop-shadow(0 0 6px rgba(255,215,100,0.6));
}

/* halo dor√© subtil dessous */
.nav-btn.active::after{
  content: "";
  position: absolute;
  bottom: 10px;
  left: 50%;
  width: 20px;
  height: 3px;
  border-radius: 999px;
  background: linear-gradient(90deg, transparent, #ffd766, transparent);
  transform: translateX(-50%) scaleX(0);
  opacity: 0;
  animation: glowPulse 0.8s ease-out forwards;
}

/* ---- animations ---- */
@keyframes bounceGold {
  0%   { transform: translateY(0); }
  35%  { transform: translateY(-6px); }
  65%  { transform: translateY(2px); }
  100% { transform: translateY(0); }
}

@keyframes glowPulse {
  0%   { opacity: 0; transform: translateX(-50%) scaleX(0.2); }
  40%  { opacity: 1; transform: translateX(-50%) scaleX(1.1); }
  100% { opacity: 0; transform: translateX(-50%) scaleX(1.3); }
}

    /* ===== BOUTON PANIER ===== */
    .cart-fab {
      position: fixed;
      right: 18px;
      bottom: 120px; /* juste au-dessus du menu bas */
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 1px solid rgba(255,215,102,0.9);
      background: radial-gradient(circle at 30% 20%, rgba(255,215,102,0.15), transparent 60%),
                  linear-gradient(180deg,#151515,#050505);
      box-shadow: 0 10px 26px rgba(0,0,0,0.55);
      color: #fefefe;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 310;
    }

    .cart-fab:active {
      transform: translateY(1px);
    }

    /* ===== MODAL PANIER ===== */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.6);
      display: flex;
      align-items: flex-end;
      z-index: 320;
    }

    .modal.hidden {
      display: none;
    }

    .modal-inner {
      background: var(--bg);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      box-shadow: 0 -10px 30px rgba(0,0,0,.6);
      width: 100%;
      max-height: 86vh;
      display: flex;
      flex-direction: column;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 14px;
      border-bottom: 1px solid var(--border);
    }

    .icon-btn {
      background: #121216;
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 10px;
      height: 34px;
      width: 34px;
    }

    .cart-items {
      padding: 10px 12px;
      overflow: auto;
    }

    .cart-item {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 6px;
      padding: 10px 0;
      border-bottom: 1px dashed var(--border);
    }

    .item-title {
      font-weight: 700;
    }

    .item-sub {
      color: var(--muted);
      font-size: .95rem;
    }

    .item-right {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .modal-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      border-top: 1px solid var(--border);
      gap: 8px;
      flex-wrap: wrap;
    }

    .total-line {
      font-size: 1.05rem;
    }

    /* ===== TOAST ===== */
    #toast {
      position: fixed;
      left: 50%;
      bottom: 86px;
      transform: translateX(-50%);
      padding: 10px 14px;
      background: #121216;
      color: #fff;
      border: 1px solid #333;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      z-index: 350;
      opacity: 0;
      transition: opacity .2s;
      pointer-events: none; /* ne bloque pas les clics */
    }
    
    /* ==== TITRES EN BLANC DANS LA PAGE INFOS ==== */
#tab-infos strong {
  color: #fff; /* texte blanc */
  font-weight: 700; /* en gras */
  text-shadow: 0 0 4px rgba(255, 215, 0, 0.3); /* petit halo dor√© */
}

/* ===== ANIMATIONS FLUIDES ===== */

/* Effet d‚Äôapparition douce des blocs */
.info-card, .product-card {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeUp 0.6s ease forwards;
}

@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Effet de survol sur les boutons */
.btn {
  transition: all 0.2s ease;
}

.btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
}

/* Effet ‚Äúlueur‚Äù sur le logo */
header img {
  filter: drop-shadow(0 0 12px rgba(255, 200, 0, 0.5));
  transition: 0.3s ease;
}

header img:hover {
  transform: scale(1.02);
  filter: drop-shadow(0 0 18px rgba(255, 230, 150, 0.8));
}

/* ===== HERO "NOUS CONTACTER" ===== */
.contact-hero{
  margin: 10px 12px 20px;
  padding: 22px 20px 26px;
  border-radius: 26px;
  background:
    radial-gradient(circle at 0% 0%, rgba(255,215,100,0.22), transparent 60%),
    radial-gradient(circle at 100% 100%, rgba(255,215,100,0.20), transparent 60%),
    rgba(0,0,0,0.78);
  box-shadow:
    0 18px 40px rgba(0,0,0,0.85),
    0 0 18px rgba(255,215,100,0.25);
  text-align: center;
  position: relative;
  overflow: hidden;
}

/* l√©ger halo anim√© derri√®re le bloc */
.contact-hero::before{
  content: "";
  position: absolute;
  inset: -40%;
  background: radial-gradient(circle, rgba(255,215,100,0.22), transparent 65%);
  opacity: 0.0;
  animation: heroGlow 5s ease-in-out infinite;
  z-index: 0;
}

/* --- TITRE PRINCIPAL (version claire et renforc√©e) --- */
.contact-hero-title {
  display: inline-block;
  font-size: 3.2rem;              /* üü° plus grand */
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 3px;
  line-height: 1.15;
  background: linear-gradient(90deg, #FFFBEA, #FFE278, #FFD54A);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow:
    0 0 10px rgba(255,215,100,0.9),
    0 0 25px rgba(255,215,100,0.7),
    0 0 40px rgba(255,215,100,0.3);
  animation: heroTextGlow 3.5s ease-in-out infinite alternate;
  position: relative;
  z-index: 5;
  isolation: isolate;
  margin-bottom: 10px;
}

/* √©toile au centre */
.contact-hero-star {
  font-size: 2.8rem;
  color: #FFE066;
  margin-top: 8px;
  text-shadow:
    0 0 14px rgba(255,215,100,0.9),
    0 0 28px rgba(255,215,100,0.5);
  animation: starSwing 3.2s ease-in-out infinite;
}

/* sous-titre bien lisible */
.contact-hero-subtitle{
  margin: 0;
  font-size: 1rem;
  color: rgba(255,255,240,0.96);
  text-shadow: 0 0 6px rgba(0,0,0,0.85);
  position: relative;
  z-index: 1;
}

/* phrase du bas */
.contact-hero-tagline{
  margin: 24px 12px 18px;
  text-align: center;
  font-size: 0.95rem;
  color: rgba(255,255,220,0.95);
  text-shadow:
    0 0 8px rgba(255,215,100,0.7),
    0 0 20px rgba(0,0,0,0.85);
  animation: taglinePulse 2.8s ease-in-out infinite;
}

/* animations */
@keyframes heroGlow{
  0%,100% { opacity: 0.25; transform: scale(1); }
  50%     { opacity: 0.55; transform: scale(1.06); }
}

@keyframes starFloat{
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(-5px) scale(1.08); }
}

@keyframes taglinePulse{
  0%,100% { opacity: 0.65; }
  50%     { opacity: 1; }
}

/* lettres anim√©es une par une */
.contact-hero-title span{
  display: inline-block;
  opacity: 0;
  transform: translateY(10px);
  animation: letterPop 0.5s forwards;
}

@keyframes letterPop{
  0%{
    opacity: 0;
    transform: translateY(10px);
  }
  100%{
    opacity: 1;
    transform: translateY(0);
  }
}
  </style>
</head>
<body>

  <!-- SPLASH SCREEN POCHONSTORE -->
  <div id="splash" class="splash">
    <div class="splash-inner">
      <div class="splash-logo">
        <img src="img/banner.png" alt="PochonStore">
      </div>

      <div class="splash-title">PochonStore</div>
      <div class="splash-sub">Chargement de la boutique‚Ä¶</div>

      <!-- les trois petits points -->
      <div class="splash-dots" id="splashDots">
        <span></span><span></span><span></span>
      </div>
    </div>
  </div>
  
  <!-- HEADER -->
  <header class="header">
    <div class="header-overlay"></div>
    <img src="img/banner.png" alt="PochonStore" class="header-logo" />
  </header>

  <main id="main">
    <!-- ONGLET MENU -->
    <section id="tab-menu" class="tab-panel active">
      <div class="product-grid" id="productGrid">
        <!-- P1 : Pochons -->
        <button class="product-thumb" onclick="openProduct('p1')">
          <img src="img/pochons11.png" alt="Pochon personnalis√©" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Pochon personnalis√©</div>
            <div class="product-thumb-sub">Flatbags et doypacks imprim√©s avec ton visuel</div>
          </div>
        </button>

        <!-- P2 : Tableaux -->
        <button class="product-thumb" onclick="openProduct('p2')">
          <img src="img/tableau1.jpg" alt="Tableaux personnalis√©s" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Tableaux personnalis√©s</div>
            <div class="product-thumb-sub">Panoramiques, populaires, carr√©s</div>
          </div>
        </button>

        <!-- P3 : Cartes -->
        <button class="product-thumb" onclick="openProduct('p3')">
          <img src="img/cartescata.png" alt="Cartes fid√©lit√© / visite" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Cartes fid√©lit√© / visite</div>
            <div class="product-thumb-sub">Recto verso, 8,5cm x 5,4cm</div>
          </div>
        </button>

        <!-- P4 : √âtiquettes -->
        <button class="product-thumb" onclick="openProduct('p4')">
          <img src="img/etiquettes1.jpg" alt="√âtiquettes personnalis√©es" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">√âtiquettes personnalis√©es</div>
            <div class="product-thumb-sub">Rondes, rectangles, tailles sur devis</div>
          </div>
        </button>

        <!-- P5 : Scelleuse -->
        <button class="product-thumb" onclick="openProduct('p5')">
          <img src="img/scelleuse.jpg" alt="Scelleuse" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Scelleuse</div>
            <div class="product-thumb-sub">Scelleuse thermique pour fermer tes pochons</div>
          </div>
        </button>

        <!-- P6 : Fus√©es -->
        <button class="product-thumb" onclick="openProduct('p6')">
          <img src="img/fus√©es1.jpg" alt="Fus√©es 1,5 ml" />
          <div class="product-thumb-body">
            <div class="product-thumb-title">Fus√©es 1,5 ml</div>
            <div class="product-thumb-sub">Capsules vides, tarifs selon quantit√©</div>
          </div>
        </button>
        
        <!-- P7 : Design personnalis√© -->
<button class="product-thumb" onclick="openProduct('p7')">
  <img src="img/design.jpg" alt="Design personnalis√©" />
  <div class="product-thumb-body">
    <div class="product-thumb-title">Design personnalis√©</div>
    <div class="product-thumb-sub">Basique, Premium ou Pack identit√©</div>
  </div>
</button>
      </div>

      <!-- FICHE PRODUIT P1 -->
      <div id="productDetail_p1" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/pochons22.png" alt="Pochon personnalis√©" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Pochon personnalis√©</h3>
          <p class="product-desc">
            Pochons flatbag et doypacks imprim√©s avec votre design.
          </p>
          <div class="product-meta">
            <span class="pill">Min : 500 pi√®ces</span>
            <span class="pill">D√©lai : 12‚Äì13 jours ouvrables</span>
          </div>
          <div class="product-options">
  <label>
    Quantit√© (pack) :
    <select id="p1_quantite">
      <option>500</option>
      <option>1000</option>
      <option>1500</option>
      <option>2000</option>
      <option>+ de quantit√© (sur devis)</option>
    </select>
  </label>

  <label>
    Taille :
    <select id="p1_taille">
      <option>8√ó11 cm</option>
      <option>8√ó13 cm</option>
    </select>
  </label>

  <label>
    Finition :
    <select id="p1_finition">
      <option>Mat</option>
      <option>Brillant</option>
    </select>
  </label>

  <label>
    Impression :
    <select id="p1_impression">
      <option>1 design</option>
      <option>multi designs +40‚Ç¨</option>
    </select>
  </label>
</div>
          <div class="qty-row">
            <button type="button" onclick="dec('p1_qty')">‚àí</button>
            <input id="p1_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p1_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP1()">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- FICHE PRODUIT P2 -->
      <div id="productDetail_p2" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/tableau1.jpg" alt="Tableaux personnalis√©s" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Tableaux personnalis√©s</h3>
          <p class="product-desc">
            Impression haute qualit√© sur toile, formats panoramiques, populaires et carr√©s.
          </p>
          <div class="product-options">
            <label>Format :
              <select id="p2_format">
                <!-- Panoramiques -->
                <option value="Panoramique|60√ó20|50">Panoramique 60√ó20 ‚Äî 50 ‚Ç¨</option>
                <option value="Panoramique|60√ó30|60">Panoramique 60√ó30 ‚Äî 60 ‚Ç¨</option>
                <option value="Panoramique|80√ó40|80">Panoramique 80√ó40 ‚Äî 80 ‚Ç¨</option>
                <option value="Panoramique|100√ó50|100">Panoramique 100√ó50 ‚Äî 100 ‚Ç¨</option>
                <option value="Panoramique|120√ó60|120">Panoramique 120√ó60 ‚Äî 120 ‚Ç¨</option>
                <!-- Populaires -->
                <option value="Populaire|60√ó40|70">Populaire 60√ó40 ‚Äî 70 ‚Ç¨</option>
                <option value="Populaire|80√ó60|90">Populaire 80√ó60 ‚Äî 90 ‚Ç¨</option>
                <option value="Populaire|90√ó60|100">Populaire 90√ó60 ‚Äî 100 ‚Ç¨</option>
                <!-- Carr√©s -->
                <option value="Carr√©|60√ó60|70">Carr√© 60√ó60 ‚Äî 70 ‚Ç¨</option>
                <option value="Carr√©|80√ó80|90">Carr√© 80√ó80 ‚Äî 90 ‚Ç¨</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p2_qty')">‚àí</button>
            <input id="p2_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p2_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP2()">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- FICHE PRODUIT P3 -->
      <div id="productDetail_p3" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/cartes.mp4" alt="Cartes fid√©lit√© / visite" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Cartes de fid√©lit√© / visite</h3>
          <p class="product-desc">
            Cartes professionnelles recto verso, papier 350g, impression couleur.
          </p>
          <div class="product-options">
            <label>Quantit√© :
              <select id="p3_quantite">
                <option value="250|70">250 cartes ‚Äî 70 ‚Ç¨</option>
                <option value="500|140">500 cartes ‚Äî 140 ‚Ç¨</option>
                <option value="1000|180">1000 cartes ‚Äî 180 ‚Ç¨</option>
                <option value="+1000|0">+ 1000 cartes ‚Äî sur devis</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p3_qty')">‚àí</button>
            <input id="p3_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p3_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP3()">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- FICHE PRODUIT P4 -->
      <div id="productDetail_p4" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/etiquettes1.jpg" alt="√âtiquettes personnalis√©es" />
        </div>
        <div class="product-card">
          <h3 class="product-title">√âtiquettes personnalis√©es</h3>
          <p class="product-desc">
            √âtiquettes adh√©sives pour packaging, pochons, produits‚Ä¶ Formats au choix.
          </p>
          <div class="product-options">
            <label>Format :
              <select id="p4_format">
                <option value="200 √©tiquettes 7√ó4 cm|70">200 √©tiquettes 7√ó4 cm ‚Äî 70 ‚Ç¨</option>
                <option value="400 √©tiquettes rondes 0‚Äì3 cm|60">400 √©tiquettes rondes 0‚Äì3 cm ‚Äî 60 ‚Ç¨</option>
                <option value="Taille personnalis√©e (sur devis)|0">Taille personnalis√©e ‚Äî sur devis</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p4_qty')">‚àí</button>
            <input id="p4_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p4_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP4()">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- FICHE PRODUIT P5 -->
      <div id="productDetail_p5" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/scelleuse.jpg" alt="Scelleuse" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Scelleuse</h3>
          <p class="product-desc">
            Appareil de soudure thermique id√©al pour fermer vos pochons.
          </p>
          <div class="product-meta">
            <span class="pill">Prix : 10 ‚Ç¨</span>
            <span class="pill">D√©lai : 2‚Äì3 jours</span>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p5_qty')">‚àí</button>
            <input id="p5_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p5_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP5()">Ajouter</button>
          </div>
        </div>
      </div>

      <!-- FICHE PRODUIT P6 -->
      <div id="productDetail_p6" class="product-detail hidden">
        <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>
        <div class="detail-media">
          <img src="img/fus√©es1.jpg" alt="Fus√©es 1,5 ml" />
        </div>
        <div class="product-card">
          <h3 class="product-title">Fus√©es 1,5 ml</h3>
          <p class="product-desc">
            Capsules vides pr√™tes √† remplir. Tarifs d√©gressifs selon la quantit√©.
          </p>
          <div class="product-options">
            <label>Quantit√© :
              <select id="p6_quantite">
                <option data-price="20">100 ‚Äî 20 ‚Ç¨</option>
                <option data-price="50">500 ‚Äî 50 ‚Ç¨</option>
                <option data-price="100">1000 ‚Äî 100 ‚Ç¨</option>
                <option data-price="0">+ sur devis</option>
              </select>
            </label>
          </div>
          <div class="qty-row">
            <button type="button" onclick="dec('p6_qty')">‚àí</button>
            <input id="p6_qty" type="number" min="1" value="1" />
            <button type="button" onclick="inc('p6_qty')">+</button>
            <button class="btn primary" type="button" onclick="addP6()">Ajouter</button>
          </div>
        </div>
      </div>
      
      <!-- FICHE PRODUIT P7: DESIGN PERSONNALIS√â -->
<div id="productDetail_p7" class="product-detail hidden">
  <button class="btn-back" onclick="closeProduct()">‚Üê Retour</button>

  <div class="detail-media">
    <img src="img/design.jpg" alt="Design personnalis√©" />
  </div>

  <div class="product-card">
    <h3 class="product-title">Design personnalis√©</h3>
    <p class="product-desc">
      Tu n‚Äôas pas encore de visuel ? On s‚Äôoccupe du design pour tes pochons, cartes, √©tiquettes, etc.
      Choisis la formule qui correspond √† ton besoin.
    </p>

    <div class="product-meta">
      <span class="pill">Fichier livrable : PNG/JPG haute qualit√©</span>
      <span class="pill">R√©visions possibles selon la formule</span>
    </div>

    <div class="product-options">
      <label>Formule :
        <select id="p7_formule">
          <option value="Basique|40|2‚Äì3 jours">
            Formule basique ‚Äî 40 ‚Ç¨ (2‚Äì3 jours)
          </option>
          <option value="Premium (dessin fait main)|180|4‚Äì5 jours">
            Formule premium (dessin fait main) ‚Äî 180 ‚Ç¨ (4‚Äì5 jours)
          </option>
          <option value="Pack identit√© (1 logo + 1 flyer + 2 stickers)|80|3‚Äì4 jours">
            Pack identit√© ‚Äî 80 ‚Ç¨ (3‚Äì4 jours)
          </option>
        </select>
      </label>
    </div>

    <div class="qty-row">
      <button type="button" onclick="dec('p7_qty')">‚àí</button>
      <input id="p7_qty" type="number" min="1" value="1" />
      <button type="button" onclick="inc('p7_qty')">+</button>
      <button class="btn primary" type="button" onclick="addP7()">Ajouter</button>
    </div>
  </div>
</div>
    </section>

        <!-- ONGLET INFOS -->
    <section id="tab-infos" class="tab-panel">
      <div class="info-card">
        <h2>üßæ Informations ‚Äì PSS</h2>

        <p>üí∞ <strong>Paiement</strong><br>
        Un acompte est demand√© √† la commande. Le solde est √† r√©gler avant l‚Äôexp√©dition des produits.</p>

        <p>‚è±Ô∏è <strong>D√©lais de production</strong><br>
        Les d√©lais peuvent varier selon le type de produit et la quantit√©.
        Une estimation est communiqu√©e lors de la validation du devis.</p>

        <p>üìÅ <strong>Formats de fichiers accept√©s</strong><br>
        (.png, .jpg, .pdf) Assure-toi que tes visuels soient en haute r√©solution
        pour un rendu optimal.</p>

        <p>üé® <strong>Produits personnalis√©s</strong><br>
        Les cr√©ations personnalis√©es ne sont ni √©changeables ni remboursables, sauf en cas d‚Äôerreur
        ou de d√©faut de fabrication constat√©.</p>

        <p>üì¶ <strong>Exp√©dition</strong><br>
        Les commandes sont soigneusement emball√©es et exp√©di√©es apr√®s validation du paiement complet.
        Le num√©ro de suivi est communiqu√© d√®s l‚Äôenvoi.</p>
      </div>
    </section>

    <section id="tab-contact" class="tab-panel">
  <!-- HERO "NOUS CONTACTER" -->
  <div class="contact-hero">
    <h2 id="contactHeroTitle" class="contact-hero-title">
      NOUS<br>CONTACTER
    </h2>
    <div class="contact-hero-star">‚ú¶</div>
    <p class="contact-hero-tagline">Un message, un devis, une id√©e ? On vous r√©pond vite ‚ú®</p>
  </div>

  <!-- BLOC 1 : CONTACT -->
  <div class="info-card">
    <h2>Contact</h2>
    <p>Parle directement avec nous sur Telegram pour un devis,
      une question ou le suivi de commande.</p>
    <button class="btn primary" type="button" onclick="openContact()">
      √âcrire au compte
    </button>
  </div>

  <!-- BLOC 2 : CANAL -->
  <div class="info-card">
    <h2>Rejoindre le canal</h2>
    <p>Actus, promos, coulisses de Pochon Store.</p>
    <button class="btn primary" type="button" onclick="openChannel()">
      Ouvrir le canal
    </button>
  </div>

  <!-- BLOC 3 : TOUS NOS LIENS -->
  <div class="info-card">
    <h2>Tous nos liens</h2>
    <p>Retrouve la boutique, les r√©seaux et tous les liens utiles sur une seule page.</p>
    <button class="btn primary" type="button" onclick="openLinksHub()">
      Voir tous nos liens
    </button>
  </div>

  <!-- PHRASE DU BAS -->
  <p class="contact-hero-tagline">
    Nous sommes l√† pour t‚Äôaider 7j/7 ‚ú®
  </p>
</section>

  <!-- BOUTON PANIER FLOTTANT -->
  <button id="cartFab" class="cart-fab" type="button" onclick="openCart()">üõí</button>

  <!-- MODAL PANIER -->
  <div id="cartModal" class="modal hidden" aria-hidden="true">
    <div class="modal-inner">
      <header class="modal-header">
        <h3>Votre panier</h3>
        <button class="icon-btn" type="button" onclick="closeCart(true)">‚úï</button>
      </header>
      <div id="cartItems" class="cart-items"></div>
      <footer class="modal-footer">
        <div class="total-line">
          Total estim√© : <strong id="cartTotal">0,00 ‚Ç¨</strong>
        </div>
        <button class="btn" type="button" onclick="clearCart()">Vider</button>
        <button class="btn primary" type="button" onclick="sendQuote()">Demander un devis</button>
      </footer>
    </div>
  </div>

  <!-- MENU BAS -->
  <nav class="bottom-nav">
    <button class="nav-btn active" data-tab="menu" onclick="switchTab(this)">
      <span class="icon">üè†</span>
      <span>Menu</span>
    </button>
    <button class="nav-btn" data-tab="infos" onclick="switchTab(this)">
      <span class="icon">‚ÑπÔ∏è</span>
      <span>Infos</span>
    </button>
    <button class="nav-btn" data-tab="canal" onclick="switchTab(this)">
      <span class="icon">üì£</span>
      <span>Canal</span>
    </button>
    <button class="nav-btn" data-tab="contact" onclick="switchTab(this)">
      <span class="icon">‚úâÔ∏è</span>
      <span>Contact</span>
    </button>
  </nav>

  <!-- TOAST -->
  <div id="toast"></div>

  <script>
    // R√©cup Telegram WebApp (si lanc√© dans Telegram)
    var tg = (window.Telegram && window.Telegram.WebApp) ? window.Telegram.WebApp : null;
    // Compte qui re√ßoit les devis
    var QUOTE_USERNAME = "pssv2";

    /* ==== NAVIGATION TABS ==== */
    function switchTab(btn){
      var tab = btn.getAttribute('data-tab'); // menu / infos / canal / contact

      // boutons
      var navs = document.querySelectorAll('.nav-btn');
      for (var i=0;i<navs.length;i++){
        navs[i].classList.remove('active');
      }
      btn.classList.add('active');

      // panels
      var panels = document.querySelectorAll('.tab-panel');
      for (var j=0;j<panels.length;j++){
        panels[j].classList.remove('active');
      }
      var active = document.getElementById('tab-' + tab);
      if (active) active.classList.add('active');

      // si on quitte le menu : fermer fiche produit
      if (tab !== 'menu'){
        closeProduct(true);
      }

      // on ferme aussi le panier
      closeCart(true);

      window.scrollTo(0,0);
    }

    /* ==== FICHES PRODUITS ==== */
    function openProduct(id){
      var grid = document.getElementById('productGrid');
      if (grid) grid.style.display = 'none';

      document.querySelectorAll('[id^="productDetail_"]').forEach(function(e){
        e.classList.add('hidden');
      });

      var el = document.getElementById('productDetail_' + id);
      if (el) el.classList.remove('hidden');

      window.scrollTo(0,0);
    }

    function closeProduct(fromTabSwitch){
      document.querySelectorAll('[id^="productDetail_"]').forEach(function(e){
        e.classList.add('hidden');
      });
      var grid = document.getElementById('productGrid');
      if (grid) grid.style.display = 'grid';
      if (!fromTabSwitch) window.scrollTo(0,0);
    }

    /* ==== INCR / DECR ==== */
    function inc(id){
      var el = document.getElementById(id);
      var v = parseInt(el.value || '1', 10) || 1;
      el.value = v + 1;
    }

    function dec(id){
      var el = document.getElementById(id);
      var v = parseInt(el.value || '1', 10) || 1;
      v = v - 1;
      if (v < 1) v = 1;
      el.value = v;
    }

    /* ==== PANIER ==== */
    var CART = [];

    function euro(n){
      try {
        return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n||0);
      } catch(e){
        return (n||0).toFixed(2) + " ‚Ç¨";
      }
    }

    // P1 : Pochons (sur devis)
    function addP1(){
  try{
    var pack       = document.getElementById('p1_quantite').value;
    var taille     = document.getElementById('p1_taille').value;
    var finition   = document.getElementById('p1_finition').value;
    var impression = document.getElementById('p1_impression').value;
    var qty = parseInt(document.getElementById('p1_qty').value || '1',10);
    if (isNaN(qty) || qty < 1) qty = 1;

    var merged = false;
    for (var i=0;i<CART.length;i++){
      var it = CART[i];
      if (it.title === 'Pochon personnalis√©' &&
          it.opts &&
          it.opts.quantitePack === pack &&
          it.opts.taille === taille &&
          it.opts.finition === finition &&
          it.opts.impression === impression){
        it.qty += qty;
        merged = true;
        break;
      }
    }

    if (!merged){
      CART.push({
        title: 'Pochon personnalis√©',
        qty: qty,
        unit: 0, // sur devis
        opts: {
          quantitePack: pack,
          taille: taille,
          finition: finition,
          impression: impression,
          minPrice: 0.8
        }
      });
    }

    renderCart();
    toast('Pochons ajout√©s');
  }catch(e){
    console.error(e);
  }
}

    // P2 : Tableaux
    function addP2(){
      try{
        var v = document.getElementById('p2_format').value; // type|taille|prix
        var parts = v.split('|');
        var type = parts[0];
        var taille = parts[1];
        var unit = parseFloat(parts[2] || '0') || 0;
        var qty = parseInt(document.getElementById('p2_qty').value || '1',10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i=0;i<CART.length;i++){
          var it = CART[i];
          if (it.title === 'Tableau personnalis√©' &&
              it.opts &&
              it.opts.type === type &&
              it.opts.taille === taille){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title:'Tableau personnalis√©',
            qty:qty,
            unit:unit,
            opts:{type:type, taille:taille}
          });
        }

        renderCart();
        toast('Tableaux ajout√©s');
      }catch(e){
        console.error(e);
      }
    }

    // P3 : Cartes fid√©lit√© / visite
    function addP3(){
      try{
        var v = document.getElementById('p3_quantite').value; // "250|70"
        var parts = v.split('|');
        var quantite = parts[0];
        var unit = parseFloat(parts[1] || '0') || 0;
        var qty = parseInt(document.getElementById('p3_qty').value || '1',10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i=0;i<CART.length;i++){
          var it = CART[i];
          if (it.title === 'Cartes de fid√©lit√© / visite' &&
              it.opts &&
              it.opts.quantite === quantite){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title:'Cartes de fid√©lit√© / visite',
            qty:qty,
            unit:unit,
            opts:{quantite:quantite}
          });
        }

        renderCart();
        toast('Cartes ajout√©es');
      }catch(e){
        console.error(e);
      }
    }

    // P4 : √âtiquettes
    function addP4(){
      try{
        var v = document.getElementById('p4_format').value; // "label|prix"
        var parts = v.split('|');
        var formatLabel = parts[0];
        var unit = parseFloat(parts[1] || '0') || 0;
        var qty = parseInt(document.getElementById('p4_qty').value || '1',10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i=0;i<CART.length;i++){
          var it = CART[i];
          if (it.title === '√âtiquettes personnalis√©es' &&
              it.opts &&
              it.opts.format === formatLabel){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title:'√âtiquettes personnalis√©es',
            qty:qty,
            unit:unit,
            opts:{format:formatLabel}
          });
        }

        renderCart();
        toast('√âtiquettes ajout√©es');
      }catch(e){
        console.error(e);
      }
    }

    // P5 : Scelleuse (10 ‚Ç¨)
    function addP5(){
      try{
        var qty = parseInt(document.getElementById('p5_qty').value || '1', 10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i = 0; i < CART.length; i++){
          var it = CART[i];
          if (it.title === 'Scelleuse'){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title: 'Scelleuse',
            qty: qty,
            unit: 10,
            opts: {}
          });
        }

        renderCart();
        toast('Scelleuse ajout√©e');
      }catch(e){
        console.error(e);
      }
    }

    // P6 : Fus√©es 1,5 ml
    function addP6(){
      try{
        var sel   = document.getElementById('p6_quantite');
        var opt   = sel.options[sel.selectedIndex];
        var label = opt.text; // ex: "100 ‚Äî 20 ‚Ç¨"
        var unit  = parseFloat(opt.getAttribute('data-price') || '0') || 0;

        var qty = parseInt(document.getElementById('p6_qty').value || '1', 10);
        if (isNaN(qty) || qty < 1) qty = 1;

        var merged = false;
        for (var i = 0; i < CART.length; i++){
          var it = CART[i];
          if (it.title === 'Fus√©es 1,5 ml' &&
              it.opts && it.opts.quantite === label){
            it.qty += qty;
            merged = true;
            break;
          }
        }

        if (!merged){
          CART.push({
            title: 'Fus√©es 1,5 ml',
            qty: qty,
            unit: unit,
            opts: {
              quantite: label
            }
          });
        }

        renderCart();
        toast('Fus√©es ajout√©es');
      }catch(e){
        console.error(e);
      }
    }

// Design personnalis√©
function addP7(){
  try{
    // R√©cup√®re la formule choisie
    var v = document.getElementById('p7_formule').value; // "Basique|40|2‚Äì3 jours"
    var parts = v.split('|');
    var formule = parts[0];          // ex: "Basique"
    var unit    = parseFloat(parts[1] || '0') || 0; // 40, 180, 80
    var delai   = parts[2];          // "2‚Äì3 jours", etc.

    // Quantit√©
    var qty = parseInt(document.getElementById('p7_qty').value || '1', 10);
    if (isNaN(qty) || qty < 1) qty = 1;

    var merged = false;
    for (var i = 0; i < CART.length; i++){
      var it = CART[i];
      if (it.title === 'Design personnalis√©' &&
          it.opts &&
          it.opts.formule === formule &&
          it.opts.delai === delai){
        it.qty += qty;
        merged = true;
        break;
      }
    }

    if (!merged){
      CART.push({
        title: 'Design personnalis√©',
        qty: qty,
        unit: unit,
        opts: {
          formule: formule,
          delai: delai
        }
      });
    }

    renderCart();
    toast('Design ajout√© au panier');
  }catch(e){
    console.error(e);
  }
}

    function openCart(){
      renderCart();
      document.getElementById('cartModal').classList.remove('hidden');
      var fab = document.getElementById('cartFab');
      if (fab) fab.style.display = 'none';
    }

    function closeCart(fromTab){
      var modal = document.getElementById('cartModal');
      if (modal) modal.classList.add('hidden');
      var fab = document.getElementById('cartFab');
      if (fab) fab.style.display = 'block';
    }

    function clearCart(){
      CART = [];
      renderCart();
    }

    function renderCart(){
      try{
        var box = document.getElementById('cartItems');
        var total = 0;
        box.innerHTML = '';

        if (!CART.length){
          box.innerHTML = '<p class="item-sub">Votre panier est vide.</p>';
        }

        for (var i=0;i<CART.length;i++){
          (function(it,idx){
            total += (it.unit || 0) * it.qty;

            var row = document.createElement('div');
            row.className = 'cart-item';

            var left = document.createElement('div');
            var t = document.createElement('div');
            t.className = 'item-title';
            t.textContent = it.title + ' √ó ' + it.qty;

            var summaryParts = [];
if (it.opts){
  if (it.opts.quantitePack) summaryParts.push('pack: '+it.opts.quantitePack);
  if (it.opts.impression)   summaryParts.push('impression: '+it.opts.impression);
  if (it.opts.finition)     summaryParts.push('finition: '+it.opts.finition);
  if (it.opts.type)         summaryParts.push('type: '+it.opts.type);
  if (it.opts.taille)       summaryParts.push('taille: '+it.opts.taille);
  if (it.opts.quantite)     summaryParts.push('quantit√©: '+it.opts.quantite);
  if (it.opts.format)       summaryParts.push('format: '+it.opts.format);
}
            var summary = summaryParts.join(' ‚Ä¢ ');

            var priceInfo;
            if (it.unit && it.unit > 0){
              priceInfo = 'min '+euro(it.unit)+'/u';
            } else if (it.opts && it.opts.minPrice){
              priceInfo = '√† partir de '+euro(it.opts.minPrice)+' (500 pcs)';
            } else {
              priceInfo = 'sur devis';
            }

            var s = document.createElement('div');
            s.className = 'item-sub';
            s.textContent = (summary ? summary+' | ' : '') + priceInfo;

            left.appendChild(t);
            left.appendChild(s);

            var right = document.createElement('div');
            right.className = 'item-right';
            var btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Suppr.';
            btn.onclick = function(){
              CART.splice(idx,1);
              renderCart();
            };

            right.appendChild(btn);
            row.appendChild(left);
            row.appendChild(right);
            box.appendChild(row);
          })(CART[i],i);
        }

        document.getElementById('cartTotal').textContent = euro(total);
      }catch(e){
        console.error(e);
      }
    }

    /* ==== ENVOI DU DEVIS VERS @pssv2 ==== */
    function sendQuote(){
      if (!CART.length){
        toast("Ajoutez des articles au panier.");
        return;
      }

      try{
        var lines = [];
        lines.push("üßæ Demande de devis ‚Äì PochonStore");
        lines.push("");
        lines.push("D√©tail du panier :");
        lines.push("");

        var total = 0;

        for (var i = 0; i < CART.length; i++){
          var it = CART[i];
          var index = i + 1;

          var ligneTitre = index + ") " + it.title + " √ó " + it.qty;
          if (it.unit){
            ligneTitre += " ‚Äî " + euro(it.unit) + " /u";
          }
          lines.push(ligneTitre);

          if (it.opts){
            var parts = [];
            for (var key in it.opts){
              if (!Object.prototype.hasOwnProperty.call(it.opts, key)) continue;
              var value = it.opts[key];
              if (value === undefined || value === null || value === "") continue;

              var label = key.replace(/_/g," ").replace(/^\w/, c => c.toUpperCase());
              parts.push(label + " : " + value);
            }
            if (parts.length){
              lines.push("   ‚Ä¢ " + parts.join("\n   ‚Ä¢ "));
            }
          }

          if (it.unit){
            var sousTotal = (it.unit || 0) * it.qty;
            total += sousTotal;
            lines.push("   Sous-total estim√© : " + euro(sousTotal));
          }

          lines.push("");
        }

        lines.push("Total estim√© (min connu) : " + euro(total));
        lines.push("");
        lines.push("Merci de v√©rifier les infos puis d‚Äôenvoyer ce message √† PochonStore pour finaliser le devis.");

        var message = lines.join("\n");

// Lien de partage Telegram avec message pr√©-rempli
var url = "https://t.me/share/url"
        + "?url="  + encodeURIComponent("https://t.me/" + QUOTE_USERNAME)
        + "&text=" + encodeURIComponent(message);

if (tg && tg.openTelegramLink){
  tg.openTelegramLink(url);
} else {
  window.open(url, "_blank");
}

        closeCart(true);
        toast("Ouverture du chat avec PochonStore‚Ä¶");
      }catch(e){
        console.error(e);
        toast("Erreur lors de la pr√©paration du devis.");
      }
    }

    /* ==== TOAST ==== */
    var toastTimer = null;
    function toast(msg){
      var el = document.getElementById('toast');
      if (!el) return;
      el.textContent = msg;
      el.style.opacity = '1';
      clearTimeout(toastTimer);
      toastTimer = setTimeout(function(){
        el.style.opacity = '0';
      },1800);
    }

    /* ==== LIENS TELEGRAM (Infos / Contact) ==== */
    function openChannel(){
      var url = "https://t.me/+BQ5eqgaiZG80MTY0"; // √† remplacer
      if (tg && tg.openTelegramLink){
        tg.openTelegramLink(url);
      } else {
        window.open(url,'_blank');
      }
    }

    function openContact(){
      var url = "https://t.me/" + QUOTE_USERNAME;
      if (tg && tg.openTelegramLink){
        tg.openTelegramLink(url);
      } else {
        window.open(url,'_blank');
      }
    }
    
    function openLinksHub(){
  // üëâ Mets ici ton vrai lien Linktree
  var url = "https://linktr.ee/pochons";

  // Si on est dans la Mini App Telegram
  if (tg && tg.openLink){
    tg.openLink(url);        // ouvre le lien dans Telegram
  } else {
    window.open(url, "_blank"); // fallback navigateur
  }
}
</script>

<script>
document.addEventListener('DOMContentLoaded', function(){
  var splash = document.getElementById('splash');
  if (!splash) return;

  // 1) on affiche le texte "Chargement de la boutique‚Ä¶"
  setTimeout(function(){
    splash.classList.add('splash--show-text');
  }, 400);

  // 2) on affiche les trois points
  setTimeout(function(){
    splash.classList.add('splash--show-dots');
  }, 900);

  // 3) on cache le splash apr√®s ~2,5 secondes
  setTimeout(function(){
    splash.classList.add('splash--hide');

    // on le retire du DOM apr√®s le fade-out
    setTimeout(function(){
      if (splash && splash.parentNode){
        splash.parentNode.removeChild(splash);
      }
    }, 600);
  }, 2500); // üëâ tu peux mettre 3000 si tu veux que √ßa reste plus longtemps
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  var titleEl = document.getElementById('contactHeroTitle');
  if (!titleEl) return;

  var txt = titleEl.textContent.trim();
  titleEl.textContent = "";
  txt.split("").forEach(function (ch, idx) {
    var span = document.createElement('span');
    span.textContent = ch;
    span.style.animation = "letterPop 0.4s forwards";
    span.style.animationDelay = (0.05 * idx) + "s";
    titleEl.appendChild(span);
  });
});

@keyframes letterPop {
  0% { opacity: 0; transform: translateY(10px); }
  100% { opacity: 1; transform: translateY(0); }
}
</script>
</script>
</body>
</html>